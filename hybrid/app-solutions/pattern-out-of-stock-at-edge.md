---
title: Wykrywanie zapasów przy użyciu platformy Azure i Azure Stack Edge
description: Dowiedz się, w jaki sposób używać usług Azure i Azure Stack Edge w celu zaimplementowania wykrywania magazynu.
author: BryanLa
ms.topic: article
ms.date: 11/05/2019
ms.author: bryanla
ms.reviewer: anajod
ms.lastreviewed: 11/05/2019
ms.openlocfilehash: 865f63bc4234e50ed169aa29cefdb1886750594c
ms.sourcegitcommit: bb3e40b210f86173568a47ba18c3cc50d4a40607
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 06/17/2020
ms.locfileid: "84911191"
---
# <a name="out-of-stock-detection-at-the-edge-pattern"></a><span data-ttu-id="8f9dc-103">Wykrywanie zapasów na wzorcu krawędzi</span><span class="sxs-lookup"><span data-stu-id="8f9dc-103">Out of stock detection at the edge pattern</span></span>

<span data-ttu-id="8f9dc-104">Ten wzorzec ilustruje, jak ustalić, czy półki zawierają elementy podstawowe przy użyciu Azure Stack krawędzi lub urządzenia Azure IoT Edge i kamer sieciowych.</span><span class="sxs-lookup"><span data-stu-id="8f9dc-104">This pattern illustrates how to determine if shelves have out of stock items using an Azure Stack Edge or Azure IoT Edge device and network cameras.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="8f9dc-105">Kontekst i problem</span><span class="sxs-lookup"><span data-stu-id="8f9dc-105">Context and problem</span></span>

<span data-ttu-id="8f9dc-106">Fizyczne magazyny detaliczne powodują utratę sprzedaży, ponieważ klienci szukają elementu, ale nie ma go na półce.</span><span class="sxs-lookup"><span data-stu-id="8f9dc-106">Physical retail stores lose sales because when customers look for an item, it's not present on the shelf.</span></span> <span data-ttu-id="8f9dc-107">Jednak element może znajdować się w tylnej części sklepu i nie został odnotowany.</span><span class="sxs-lookup"><span data-stu-id="8f9dc-107">However, the item could have been in the back of the store and not been restocked.</span></span> <span data-ttu-id="8f9dc-108">Sklepy chcą wydajniej korzystać z swoich pracowników i uzyskiwać automatyczne powiadomienia, gdy elementy wymagają uzupełnienia.</span><span class="sxs-lookup"><span data-stu-id="8f9dc-108">Stores would like to use their staff more efficiently and get automatically notified when items need restocking.</span></span>

## <a name="solution"></a><span data-ttu-id="8f9dc-109">Rozwiązanie</span><span class="sxs-lookup"><span data-stu-id="8f9dc-109">Solution</span></span>

<span data-ttu-id="8f9dc-110">Przykładem rozwiązania jest użycie urządzenia brzegowego, takiego jak Azure Stack Edge w każdym sklepie, co skutecznie przetwarza dane z kamer w sklepie.</span><span class="sxs-lookup"><span data-stu-id="8f9dc-110">The solution example uses an edge device, like an Azure Stack Edge in each store, which efficiently processes data from cameras in the store.</span></span> <span data-ttu-id="8f9dc-111">Ten zoptymalizowany projekt pozwala przechowywać tylko odpowiednie zdarzenia i obrazy do chmury.</span><span class="sxs-lookup"><span data-stu-id="8f9dc-111">This optimized design lets stores send only relevant events and images to the cloud.</span></span> <span data-ttu-id="8f9dc-112">Projekt oszczędza przepustowość, miejsce do magazynowania i zapewnia prywatność klientów.</span><span class="sxs-lookup"><span data-stu-id="8f9dc-112">The design saves bandwidth, storage space, and ensures customer privacy.</span></span> <span data-ttu-id="8f9dc-113">Ponieważ ramki są odczytywane z każdego aparatu, model ML przetwarza obraz i zwraca wszystkie obszary giełdowe.</span><span class="sxs-lookup"><span data-stu-id="8f9dc-113">As frames are read from each camera, an ML model processes the image and returns any out of stock areas.</span></span> <span data-ttu-id="8f9dc-114">Obraz i obszary podstawowe są wyświetlane w lokalnej aplikacji sieci Web.</span><span class="sxs-lookup"><span data-stu-id="8f9dc-114">The image and out of stock areas are displayed on a local web app.</span></span> <span data-ttu-id="8f9dc-115">Te dane mogą być wysyłane do środowiska usługi Time Series Insights w celu wyświetlenia szczegółowych informacji w Power BI.</span><span class="sxs-lookup"><span data-stu-id="8f9dc-115">This data can be sent to a Time Series Insight environment to show insights in Power BI.</span></span>

![Poza zapasami w architekturze rozwiązania brzegowego](media/pattern-out-of-stock-at-edge/solution-architecture.png)

<span data-ttu-id="8f9dc-117">Oto jak działa Rozwiązanie:</span><span class="sxs-lookup"><span data-stu-id="8f9dc-117">Here's how the solution works:</span></span>

1. <span data-ttu-id="8f9dc-118">Obrazy są przechwytywane z aparatu sieciowego za pośrednictwem protokołu HTTP lub RTSP.</span><span class="sxs-lookup"><span data-stu-id="8f9dc-118">Images are captured from a network camera over HTTP or RTSP.</span></span>
2. <span data-ttu-id="8f9dc-119">Rozmiar obrazu jest zmieniany i wysyłany do sterownika wnioskowania, który komunikuje się z modelem ML, aby określić, czy istnieją obrazy poza zapasami.</span><span class="sxs-lookup"><span data-stu-id="8f9dc-119">The image is resized and sent to the inference driver, which communicates with the ML model to determine if there are any out of stock images.</span></span>
3. <span data-ttu-id="8f9dc-120">Model ML zwraca wszystkie obszary giełdowe.</span><span class="sxs-lookup"><span data-stu-id="8f9dc-120">The ML model returns any out of stock areas.</span></span>
4. <span data-ttu-id="8f9dc-121">Sterownik inferencing przekazuje Nieprzetworzony obraz do obiektu BLOB (Jeśli zostanie określony) i wysyła wyniki z modelu do usługi Azure IoT Hub i procesora pola ograniczenia na urządzeniu.</span><span class="sxs-lookup"><span data-stu-id="8f9dc-121">The inferencing driver uploads the raw image to a blob (if specified), and sends the results from the model to Azure IoT Hub and a bounding box processor on the device.</span></span>
5. <span data-ttu-id="8f9dc-122">Procesor pola ograniczenia dodaje do obrazu pola związane z ograniczeniami i buforuje ścieżkę obrazu w bazie danych w pamięci.</span><span class="sxs-lookup"><span data-stu-id="8f9dc-122">The bounding box processor adds bounding boxes to the image and caches the image path in an in-memory database.</span></span>
6. <span data-ttu-id="8f9dc-123">Aplikacja sieci Web wyszukuje obrazy i wyświetla je w kolejności odbierania.</span><span class="sxs-lookup"><span data-stu-id="8f9dc-123">The web app queries for images and shows them in the order received.</span></span>
7. <span data-ttu-id="8f9dc-124">Komunikaty z IoT Hub są agregowane w Time Series Insights.</span><span class="sxs-lookup"><span data-stu-id="8f9dc-124">Messages from IoT Hub are aggregated in Time Series Insights.</span></span>
8. <span data-ttu-id="8f9dc-125">Power BI wyświetla interaktywny raport z elementów giełdowych z upływem czasu przy użyciu danych z Time Series Insights.</span><span class="sxs-lookup"><span data-stu-id="8f9dc-125">Power BI displays an interactive report of out of stock items over time with the data from Time Series Insights.</span></span>


## <a name="components"></a><span data-ttu-id="8f9dc-126">Składniki</span><span class="sxs-lookup"><span data-stu-id="8f9dc-126">Components</span></span>

<span data-ttu-id="8f9dc-127">To rozwiązanie używa następujących składników:</span><span class="sxs-lookup"><span data-stu-id="8f9dc-127">This solution uses the following components:</span></span>

| <span data-ttu-id="8f9dc-128">Warstwa</span><span class="sxs-lookup"><span data-stu-id="8f9dc-128">Layer</span></span> | <span data-ttu-id="8f9dc-129">Składnik</span><span class="sxs-lookup"><span data-stu-id="8f9dc-129">Component</span></span> | <span data-ttu-id="8f9dc-130">Opis</span><span class="sxs-lookup"><span data-stu-id="8f9dc-130">Description</span></span> |
|----------|-----------|-------------|
| <span data-ttu-id="8f9dc-131">Sprzęt lokalny</span><span class="sxs-lookup"><span data-stu-id="8f9dc-131">On-premises hardware</span></span> | <span data-ttu-id="8f9dc-132">Aparat sieciowy</span><span class="sxs-lookup"><span data-stu-id="8f9dc-132">Network camera</span></span> | <span data-ttu-id="8f9dc-133">Wymagana jest kamera sieciowa z kanałem informacyjnym HTTP lub RTSP, aby zapewnić obrazy do wnioskowania.</span><span class="sxs-lookup"><span data-stu-id="8f9dc-133">A network camera is required, with either an HTTP or RTSP feed to provide the images for inference.</span></span> |
| <span data-ttu-id="8f9dc-134">Azure</span><span class="sxs-lookup"><span data-stu-id="8f9dc-134">Azure</span></span> | <span data-ttu-id="8f9dc-135">Azure IoT Hub</span><span class="sxs-lookup"><span data-stu-id="8f9dc-135">Azure IoT Hub</span></span> | <span data-ttu-id="8f9dc-136">[Usługa Azure IoT Hub](/azure/iot-hub/) obsługuje obsługę administracyjną urządzeń i obsługę komunikatów na urządzeniach brzegowych.</span><span class="sxs-lookup"><span data-stu-id="8f9dc-136">[Azure IoT Hub](/azure/iot-hub/) handles device provisioning and messaging for the edge devices.</span></span> |
|  | <span data-ttu-id="8f9dc-137">Azure Time Series Insights</span><span class="sxs-lookup"><span data-stu-id="8f9dc-137">Azure Time Series Insights</span></span> | <span data-ttu-id="8f9dc-138">[Azure Time Series Insights](/azure/time-series-insights/) przechowuje komunikaty z IoT Hub do wizualizacji.</span><span class="sxs-lookup"><span data-stu-id="8f9dc-138">[Azure Time Series Insights](/azure/time-series-insights/) stores the messages from IoT Hub for visualization.</span></span> |
|  | <span data-ttu-id="8f9dc-139">Power BI</span><span class="sxs-lookup"><span data-stu-id="8f9dc-139">Power BI</span></span> | <span data-ttu-id="8f9dc-140">[Firma Microsoft Power BI](https://powerbi.microsoft.com/) zapewnia firmowe raporty dotyczące braku zdarzeń giełdowych.</span><span class="sxs-lookup"><span data-stu-id="8f9dc-140">[Microsoft Power BI](https://powerbi.microsoft.com/) provides business-focused reports of out of stock events.</span></span> <span data-ttu-id="8f9dc-141">Power BI zapewnia łatwy w użyciu interfejs nawigacyjny do wyświetlania danych wyjściowych z Azure Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="8f9dc-141">Power BI provides an easy-to-use dashboard interface for viewing the output from Azure Stream Analytics.</span></span> |
| <span data-ttu-id="8f9dc-142">Azure Stack Edge lub</span><span class="sxs-lookup"><span data-stu-id="8f9dc-142">Azure Stack Edge or</span></span><br><span data-ttu-id="8f9dc-143">Urządzenie Azure IoT Edge</span><span class="sxs-lookup"><span data-stu-id="8f9dc-143">Azure IoT Edge device</span></span> | <span data-ttu-id="8f9dc-144">Azure IoT Edge</span><span class="sxs-lookup"><span data-stu-id="8f9dc-144">Azure IoT Edge</span></span> | <span data-ttu-id="8f9dc-145">[Azure IoT Edge](/azure/iot-edge/) organizuje środowisko uruchomieniowe kontenerów lokalnych i obsługuje zarządzanie urządzeniami i ich aktualizacje.</span><span class="sxs-lookup"><span data-stu-id="8f9dc-145">[Azure IoT Edge](/azure/iot-edge/) orchestrates the runtime for the on-premises containers and handles device management and updates.</span></span>|
| | <span data-ttu-id="8f9dc-146">Brainwave projektu platformy Azure</span><span class="sxs-lookup"><span data-stu-id="8f9dc-146">Azure project brainwave</span></span> | <span data-ttu-id="8f9dc-147">Na urządzeniu brzegowym w Azure Stack [Project Brainwave](https://blogs.microsoft.com/ai/build-2018-project-brainwave/) używa opartych na programowalnych tablic bram (FPGA) do przyspieszania inferencing ml.</span><span class="sxs-lookup"><span data-stu-id="8f9dc-147">On an Azure Stack Edge device, [Project Brainwave](https://blogs.microsoft.com/ai/build-2018-project-brainwave/) uses Field-Programmable Gate Arrays (FPGAs) to accelerate ML inferencing.</span></span>|

## <a name="issues-and-considerations"></a><span data-ttu-id="8f9dc-148">Problemy i kwestie do rozważenia</span><span class="sxs-lookup"><span data-stu-id="8f9dc-148">Issues and considerations</span></span>

<span data-ttu-id="8f9dc-149">Podczas decydowania o sposobie wdrożenia tego rozwiązania należy wziąć pod uwagę następujące kwestie:</span><span class="sxs-lookup"><span data-stu-id="8f9dc-149">Consider the following points when deciding how to implement this solution:</span></span>

### <a name="scalability"></a><span data-ttu-id="8f9dc-150">Skalowalność</span><span class="sxs-lookup"><span data-stu-id="8f9dc-150">Scalability</span></span>

<span data-ttu-id="8f9dc-151">Większość modeli uczenia maszynowego może działać tylko na określonej liczbie klatek na sekundę, w zależności od podanego sprzętu.</span><span class="sxs-lookup"><span data-stu-id="8f9dc-151">Most machine learning models can only run at a certain number of frames per second, depending on the provided hardware.</span></span> <span data-ttu-id="8f9dc-152">Określ optymalną częstotliwość próbkowania z kamer, aby upewnić się, że potok ML nie ma kopii zapasowej.</span><span class="sxs-lookup"><span data-stu-id="8f9dc-152">Determine the optimal sample rate from your camera(s) to ensure that the ML pipeline doesn't back up.</span></span> <span data-ttu-id="8f9dc-153">Różne typy sprzętu będą obsługiwać różne liczby kamer i szybkości klatek.</span><span class="sxs-lookup"><span data-stu-id="8f9dc-153">Different types of hardware will handle different numbers of cameras and frame rates.</span></span>

### <a name="availability"></a><span data-ttu-id="8f9dc-154">Dostępność</span><span class="sxs-lookup"><span data-stu-id="8f9dc-154">Availability</span></span>

<span data-ttu-id="8f9dc-155">Ważne jest, aby wziąć pod uwagę, co się dzieje w przypadku utraty łączności przez urządzenie brzegowe.</span><span class="sxs-lookup"><span data-stu-id="8f9dc-155">It's important to consider what might happen if the edge device loses connectivity.</span></span> <span data-ttu-id="8f9dc-156">Zastanów się, jakie dane mogą zostać utracone z Time Series Insights i Power BI pulpitu nawigacyjnego.</span><span class="sxs-lookup"><span data-stu-id="8f9dc-156">Consider what data might be lost from the Time Series Insights and Power BI dashboard.</span></span> <span data-ttu-id="8f9dc-157">Przykładowe rozwiązanie jako dostarczone nie jest przeznaczone do wysokiej dostępności.</span><span class="sxs-lookup"><span data-stu-id="8f9dc-157">The example solution as provided isn't designed to be highly available.</span></span>

### <a name="manageability"></a><span data-ttu-id="8f9dc-158">Możliwości zarządzania</span><span class="sxs-lookup"><span data-stu-id="8f9dc-158">Manageability</span></span>

<span data-ttu-id="8f9dc-159">To rozwiązanie może obejmować wiele urządzeń i lokalizacji, które mogą uzyskać nieporęczny.</span><span class="sxs-lookup"><span data-stu-id="8f9dc-159">This solution can span many devices and locations, which could get unwieldy.</span></span> <span data-ttu-id="8f9dc-160">Usługi IoT platformy Azure mogą automatycznie przenosić nowe lokalizacje i urządzenia w tryb online i aktualizować je na bieżąco.</span><span class="sxs-lookup"><span data-stu-id="8f9dc-160">Azure's IoT services can automatically bring new locations and devices online and keep them up to date.</span></span> <span data-ttu-id="8f9dc-161">Należy również przestrzegać odpowiednich procedur zarządzania danymi.</span><span class="sxs-lookup"><span data-stu-id="8f9dc-161">Proper data governance procedures must be followed as well.</span></span>

### <a name="security"></a><span data-ttu-id="8f9dc-162">Zabezpieczenia</span><span class="sxs-lookup"><span data-stu-id="8f9dc-162">Security</span></span>

<span data-ttu-id="8f9dc-163">Ten wzorzec obsługuje potencjalnie poufne dane.</span><span class="sxs-lookup"><span data-stu-id="8f9dc-163">This pattern handles potentially sensitive data.</span></span> <span data-ttu-id="8f9dc-164">Upewnij się, że klucze są regularnie obracane, a uprawnienia na koncie usługi Azure Storage i lokalnych udziałach zostały prawidłowo ustawione.</span><span class="sxs-lookup"><span data-stu-id="8f9dc-164">Make sure keys are regularly rotated and the permissions on the Azure Storage Account and local shares are correctly set.</span></span>

## <a name="next-steps"></a><span data-ttu-id="8f9dc-165">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="8f9dc-165">Next steps</span></span>

<span data-ttu-id="8f9dc-166">Aby dowiedzieć się więcej na temat tematów wprowadzonych w tym artykule:</span><span class="sxs-lookup"><span data-stu-id="8f9dc-166">To learn more about topics introduced in this article:</span></span>
- <span data-ttu-id="8f9dc-167">W tym wzorcu są używane wiele usług związanych z usługą IoT, w tym [Azure IoT Edge](/azure/iot-edge/), [Azure IoT Hub](/azure/iot-hub/)i [Azure Time Series Insights](/azure/time-series-insights/).</span><span class="sxs-lookup"><span data-stu-id="8f9dc-167">Multiple IoT related services are used in this pattern, including [Azure IoT Edge](/azure/iot-edge/), [Azure IoT Hub](/azure/iot-hub/), and [Azure Time Series Insights](/azure/time-series-insights/).</span></span>
- <span data-ttu-id="8f9dc-168">Aby dowiedzieć się więcej o programie Microsoft Project Brainwave, zapoznaj [się z ogłoszeniem na blogu](https://blogs.microsoft.com/ai/build-2018-project-brainwave/) i wyewidencjonuj [Machine Learning przyspieszonej platformy Azure za pomocą programu Project Brainwave wideo](https://www.youtube.com/watch?v=DJfMobMjCX0).</span><span class="sxs-lookup"><span data-stu-id="8f9dc-168">To learn more about Microsoft Project Brainwave, see [the blog announcement](https://blogs.microsoft.com/ai/build-2018-project-brainwave/) and checkout out the [Azure Accelerated Machine Learning with Project Brainwave video](https://www.youtube.com/watch?v=DJfMobMjCX0).</span></span>
- <span data-ttu-id="8f9dc-169">Zobacz [zagadnienia dotyczące projektowania aplikacji hybrydowych](overview-app-design-considerations.md) , aby dowiedzieć się więcej o najlepszych rozwiązaniach i uzyskać odpowiedzi na wszelkie dodatkowe pytania.</span><span class="sxs-lookup"><span data-stu-id="8f9dc-169">See [Hybrid app design considerations](overview-app-design-considerations.md) to learn more about best practices and to get answers to any additional questions.</span></span>
- <span data-ttu-id="8f9dc-170">Zapoznaj się z [rodziną Azure Stack produktów i rozwiązań](/azure-stack) , aby dowiedzieć się więcej o całym portfolio produktów i rozwiązań.</span><span class="sxs-lookup"><span data-stu-id="8f9dc-170">See the [Azure Stack family of products and solutions](/azure-stack) to learn more about the entire portfolio of products and solutions.</span></span>

<span data-ttu-id="8f9dc-171">Gdy wszystko będzie gotowe do testowania przykładowego rozwiązania, przejdź do [przewodnika wdrażania rozwiązań analitycznych dla danych warstwowych](https://aka.ms/edgeinferencingdeploy).</span><span class="sxs-lookup"><span data-stu-id="8f9dc-171">When you're ready to test the solution example, continue with the [Tiered data for analytics solution deployment guide](https://aka.ms/edgeinferencingdeploy).</span></span> <span data-ttu-id="8f9dc-172">Przewodnik wdrażania zawiera instrukcje krok po kroku dotyczące wdrażania i testowania jego składników.</span><span class="sxs-lookup"><span data-stu-id="8f9dc-172">The deployment guide provides step-by-step instructions for deploying and testing its components.</span></span>
