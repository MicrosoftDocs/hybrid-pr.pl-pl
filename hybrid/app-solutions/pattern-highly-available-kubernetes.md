---
title: Wzorzec Kubernetes o wysokiej dostępności przy użyciu platformy Azure i usługi Azure Stack Hub
description: Dowiedz się, w jaki sposób rozwiązanie klastrowe Kubernetes zapewnia wysoką dostępność przy użyciu platformy Azure i Azure Stack Hub.
author: BryanLa
ms.topic: article
ms.date: 12/03/2020
ms.author: bryanla
ms.reviewer: bryanla
ms.lastreviewed: 12/03/2020
ms.openlocfilehash: 454cc0a0531882b7a8ec050a461420ce13eebcfe
ms.sourcegitcommit: df7e3e6423c3d4e8a42dae3d1acfba1d55057258
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 12/09/2020
ms.locfileid: "96911793"
---
# <a name="high-availability-kubernetes-cluster-pattern"></a><span data-ttu-id="c40ad-103">Wzorzec klastra Kubernetes o wysokiej dostępności</span><span class="sxs-lookup"><span data-stu-id="c40ad-103">High availability Kubernetes cluster pattern</span></span>

<span data-ttu-id="c40ad-104">W tym artykule opisano sposób tworzenia i obsługi infrastruktury opartej na Kubernetes o wysokiej dostępności przy użyciu aparatu usługi Azure Kubernetes Service (AKS) w centrum Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="c40ad-104">This article describes how to architect and operate a highly available Kubernetes-based infrastructure using Azure Kubernetes Service (AKS) Engine on Azure Stack Hub.</span></span> <span data-ttu-id="c40ad-105">Ten scenariusz jest typowy dla organizacji o znaczeniu krytycznym w środowiskach o wysokim stopniu ograniczonej i regulowanej.</span><span class="sxs-lookup"><span data-stu-id="c40ad-105">This scenario is common for organizations with critical workloads in highly restricted and regulated environments.</span></span> <span data-ttu-id="c40ad-106">Organizacje w domenach, takie jak finanse, obronne i rządowe.</span><span class="sxs-lookup"><span data-stu-id="c40ad-106">Organizations in domains such as finance, defense, and government.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="c40ad-107">Kontekst i problem</span><span class="sxs-lookup"><span data-stu-id="c40ad-107">Context and problem</span></span>

<span data-ttu-id="c40ad-108">Wiele organizacji opracowuje rozwiązania natywne w chmurze, które wykorzystują najnowocześniejsze usługi i technologie, takie jak Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="c40ad-108">Many organizations are developing cloud-native solutions that leverage state-of-the-art services and technologies like Kubernetes.</span></span> <span data-ttu-id="c40ad-109">Mimo że platforma Azure udostępnia centra danych w większości regionów świata, czasami istnieją przypadki użycia krawędzi i scenariusze, w których krytyczne aplikacje muszą działać w określonej lokalizacji.</span><span class="sxs-lookup"><span data-stu-id="c40ad-109">Although Azure provides datacenters in most regions of the world, sometimes there are edge use-cases and scenarios where business critical applications must run in a specific location.</span></span> <span data-ttu-id="c40ad-110">Zagadnienia obejmują:</span><span class="sxs-lookup"><span data-stu-id="c40ad-110">Considerations include:</span></span>

- <span data-ttu-id="c40ad-111">Czułość lokalizacji</span><span class="sxs-lookup"><span data-stu-id="c40ad-111">Location sensitivity</span></span>
- <span data-ttu-id="c40ad-112">Opóźnienie między systemami aplikacji i lokalnymi</span><span class="sxs-lookup"><span data-stu-id="c40ad-112">Latency between the application and on-premises systems</span></span>
- <span data-ttu-id="c40ad-113">Ochrona przepustowości</span><span class="sxs-lookup"><span data-stu-id="c40ad-113">Bandwidth conservation</span></span>
- <span data-ttu-id="c40ad-114">Łączność</span><span class="sxs-lookup"><span data-stu-id="c40ad-114">Connectivity</span></span>
- <span data-ttu-id="c40ad-115">Wymagania prawne lub statutowe</span><span class="sxs-lookup"><span data-stu-id="c40ad-115">Regulatory or statutory requirements</span></span>

<span data-ttu-id="c40ad-116">Platforma Azure, w połączeniu z centrum Azure Stack, rozwiązuje największe problemy.</span><span class="sxs-lookup"><span data-stu-id="c40ad-116">Azure, in combination with Azure Stack Hub, addresses most of these concerns.</span></span> <span data-ttu-id="c40ad-117">Poniżej opisano szeroki zestaw opcji, decyzji i zagadnień dotyczących pomyślnej implementacji usługi Kubernetes działającej w centrum Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="c40ad-117">A broad set of options, decisions, and considerations for a successful implementation of Kubernetes running on Azure Stack Hub is described below.</span></span>

## <a name="solution"></a><span data-ttu-id="c40ad-118">Rozwiązanie</span><span class="sxs-lookup"><span data-stu-id="c40ad-118">Solution</span></span>

<span data-ttu-id="c40ad-119">W tym wzorcu przyjęto założenie, że musimy zająć się ścisłym zestawem ograniczeń.</span><span class="sxs-lookup"><span data-stu-id="c40ad-119">This pattern assumes that we have to deal with a strict set of constraints.</span></span> <span data-ttu-id="c40ad-120">Aplikacja musi działać lokalnie, a wszystkie dane osobowe nie mogą dotrzeć do usług w chmurze publicznej.</span><span class="sxs-lookup"><span data-stu-id="c40ad-120">The application must run on-premises and all personal data must not reach public cloud services.</span></span> <span data-ttu-id="c40ad-121">Monitorowanie i inne dane nieosobowe mogą być wysyłane do platformy Azure i przetwarzane w tym miejscu.</span><span class="sxs-lookup"><span data-stu-id="c40ad-121">Monitoring and other non-PII data can be sent to Azure and be processed there.</span></span> <span data-ttu-id="c40ad-122">Do usług zewnętrznych, takich jak publiczna Container Registry lub inne, można uzyskać dostęp, ale mogą one być filtrowane przez zaporę lub serwer proxy.</span><span class="sxs-lookup"><span data-stu-id="c40ad-122">External services like a public Container Registry or others can be accessed but might be filtered through a firewall or proxy server.</span></span>

<span data-ttu-id="c40ad-123">Przykładowa aplikacja pokazana tutaj (oparta na usłudze [Azure Kubernetes Service Workshop](/learn/modules/aks-workshop/)) została zaprojektowana tak, aby korzystała z rozwiązań natywnych Kubernetes, jeśli to możliwe.</span><span class="sxs-lookup"><span data-stu-id="c40ad-123">The sample application shown here (based on [Azure Kubernetes Service Workshop](/learn/modules/aks-workshop/)) is designed to use Kubernetes-native solutions whenever possible.</span></span> <span data-ttu-id="c40ad-124">Ten projekt umożliwia uniknięcie blokady dostawcy zamiast korzystania z usług natywnych platformy.</span><span class="sxs-lookup"><span data-stu-id="c40ad-124">This design avoids vendor lock-in, instead of using platform-native services.</span></span> <span data-ttu-id="c40ad-125">Przykładowo aplikacja używa własnego zaplecza bazy danych MongoDB, zamiast usługi PaaS lub zewnętrznej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="c40ad-125">As an example, the application uses a self-hosted MongoDB database backend instead of a PaaS service or external database service.</span></span>

<span data-ttu-id="c40ad-126">[![Hybrydowy wzorzec aplikacji](media/pattern-highly-available-kubernetes/application-architecture.png)](media/pattern-highly-available-kubernetes/application-architecture.png#lightbox)</span><span class="sxs-lookup"><span data-stu-id="c40ad-126">[![Application Pattern Hybrid](media/pattern-highly-available-kubernetes/application-architecture.png)](media/pattern-highly-available-kubernetes/application-architecture.png#lightbox)</span></span>

<span data-ttu-id="c40ad-127">Na powyższym diagramie przedstawiono architekturę aplikacji przykładowej aplikacji działającej na Kubernetes w centrum Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="c40ad-127">The preceding diagram illustrates the application architecture of the sample application running on Kubernetes on Azure Stack Hub.</span></span> <span data-ttu-id="c40ad-128">Aplikacja składa się z kilku składników, w tym:</span><span class="sxs-lookup"><span data-stu-id="c40ad-128">The app consists of several components, including:</span></span>

 1) <span data-ttu-id="c40ad-129">Klaster Kubernetes oparty na aparacie AKS w centrum Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="c40ad-129">An AKS Engine based Kubernetes cluster on Azure Stack Hub.</span></span>
 2) <span data-ttu-id="c40ad-130">[Menedżer certyfikatów](https://www.jetstack.io/cert-manager/), który zapewnia pakiet narzędzi do zarządzania certyfikatami w usłudze Kubernetes, używany do automatycznego żądania certyfikatów od do szyfrowania.</span><span class="sxs-lookup"><span data-stu-id="c40ad-130">[cert-manager](https://www.jetstack.io/cert-manager/), which provides a suite of tools for certificate management in Kubernetes, used to automatically request certificates from Let's Encrypt.</span></span>
 3) <span data-ttu-id="c40ad-131">Przestrzeń nazw Kubernetes, która zawiera składniki aplikacji dla frontonu (ratings-Web), API (ratings-API) i Database (ratings-MongoDB).</span><span class="sxs-lookup"><span data-stu-id="c40ad-131">A Kubernetes namespace that contains the application components for the front end (ratings-web), api (ratings-api), and database (ratings-mongodb).</span></span>
 4) <span data-ttu-id="c40ad-132">Kontroler transferu danych przychodzących, który kieruje ruch HTTP/HTTPS do punktów końcowych w klastrze Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="c40ad-132">The Ingress Controller that routes HTTP/HTTPS traffic to endpoints within the Kubernetes cluster.</span></span>

<span data-ttu-id="c40ad-133">Przykładowa aplikacja służy do ilustrowania architektury aplikacji.</span><span class="sxs-lookup"><span data-stu-id="c40ad-133">The sample application is used to illustrate the application architecture.</span></span> <span data-ttu-id="c40ad-134">Wszystkie składniki są przykładami.</span><span class="sxs-lookup"><span data-stu-id="c40ad-134">All components are examples.</span></span> <span data-ttu-id="c40ad-135">Architektura zawiera tylko jedno wdrożenie aplikacji.</span><span class="sxs-lookup"><span data-stu-id="c40ad-135">The architecture contains only a single application deployment.</span></span> <span data-ttu-id="c40ad-136">Aby zapewnić wysoką dostępność (HA), należy uruchomić wdrożenie co najmniej dwa razy w dwóch różnych wystąpieniach Azure Stack Hub — mogą one być uruchamiane w tej samej lokalizacji lub w dwóch (lub więcej) różnych lokacjach:</span><span class="sxs-lookup"><span data-stu-id="c40ad-136">To achieve high availability (HA), we'll run the deployment at least twice on two different Azure Stack Hub instances - they can run either in the same location or in two (or more) different sites:</span></span>

![Architektura infrastruktury](media/pattern-highly-available-kubernetes/aks-azure-architecture.png)

<span data-ttu-id="c40ad-138">Usługi, takie jak Azure Container Registry, Azure Monitor i inne, są hostowane poza centrum Azure Stack na platformie Azure lub lokalnie.</span><span class="sxs-lookup"><span data-stu-id="c40ad-138">Services like Azure Container Registry, Azure Monitor, and others, are hosted outside Azure Stack Hub in Azure or on-premises.</span></span> <span data-ttu-id="c40ad-139">Ten projekt hybrydowy chroni rozwiązanie przed awarią pojedynczego wystąpienia centrum Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="c40ad-139">This hybrid design protects the solution against outage of a single Azure Stack Hub instance.</span></span>

## <a name="components"></a><span data-ttu-id="c40ad-140">Składniki</span><span class="sxs-lookup"><span data-stu-id="c40ad-140">Components</span></span>

<span data-ttu-id="c40ad-141">Ogólna architektura programu składa się z następujących składników:</span><span class="sxs-lookup"><span data-stu-id="c40ad-141">The overall architecture consists of the following components:</span></span>

<span data-ttu-id="c40ad-142">**Azure Stack Hub** to rozszerzenie platformy Azure, które może uruchamiać obciążenia w środowisku lokalnym, dostarczając usługi platformy Azure w centrum danych.</span><span class="sxs-lookup"><span data-stu-id="c40ad-142">**Azure Stack Hub** is an extension of Azure that can run workloads in an on-premises environment by providing Azure services in your datacenter.</span></span> <span data-ttu-id="c40ad-143">Przejdź do [omówienia Azure Stack Hub](/azure-stack/operator/azure-stack-overview) , aby dowiedzieć się więcej.</span><span class="sxs-lookup"><span data-stu-id="c40ad-143">Go to [Azure Stack Hub overview](/azure-stack/operator/azure-stack-overview) to learn more.</span></span>

<span data-ttu-id="c40ad-144">Aparat **usługi Kubernetes platformy Azure (aparat AKS)** jest aparatem za zarządzaną ofertą usług Kubernetes, Azure Kubernetes Service (AKS), która jest obecnie dostępna na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="c40ad-144">**Azure Kubernetes Service Engine (AKS Engine)** is the engine behind the managed Kubernetes service offering, Azure Kubernetes Service (AKS), that is available in Azure today.</span></span> <span data-ttu-id="c40ad-145">W przypadku Azure Stack Hub aparat AKS umożliwia wdrażanie, skalowanie i uaktualnianie w pełni zarządzanych, samoobsługowych klastrów Kubernetes przy użyciu funkcji IaaS centrum Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="c40ad-145">For Azure Stack Hub, AKS Engine allows us to deploy, scale, and upgrade fully featured, self-managed Kubernetes clusters using Azure Stack Hub's IaaS capabilities.</span></span> <span data-ttu-id="c40ad-146">Przejdź do [omówienia aparatu AKS](https://github.com/Azure/aks-engine) , aby dowiedzieć się więcej.</span><span class="sxs-lookup"><span data-stu-id="c40ad-146">Go to [AKS Engine Overview](https://github.com/Azure/aks-engine) to learn more.</span></span>

<span data-ttu-id="c40ad-147">Przejdź do [znanych problemów i ograniczeń](https://github.com/Azure/aks-engine/blob/master/docs/topics/azure-stack.md#known-issues-and-limitations) , aby dowiedzieć się więcej o różnicach między aparatem AKS na platformie Azure i aparatem AKS w centrum Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="c40ad-147">Go to [Known Issues and Limitations](https://github.com/Azure/aks-engine/blob/master/docs/topics/azure-stack.md#known-issues-and-limitations) to learn more about the differences between AKS Engine on Azure and AKS Engine on Azure Stack Hub.</span></span>

<span data-ttu-id="c40ad-148">**Usługa Azure Virtual Network (VNET)** służy do zapewnienia infrastruktury sieci na każdym centrum Azure Stack dla Virtual Machines (VM) obsługującego infrastrukturę klastra Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="c40ad-148">**Azure Virtual Network (VNet)** is used to provide the network infrastructure on each Azure Stack Hub for the Virtual Machines (VMs) hosting the Kubernetes cluster infrastructure.</span></span>

<span data-ttu-id="c40ad-149">**Azure Load Balancer** jest używany dla punktu końcowego interfejsu API Kubernetes i Nginx transferu danych przychodzących.</span><span class="sxs-lookup"><span data-stu-id="c40ad-149">**Azure Load Balancer** is used for the Kubernetes API Endpoint and the Nginx Ingress Controller.</span></span> <span data-ttu-id="c40ad-150">Moduł równoważenia obciążenia kieruje ruch zewnętrzny (na przykład internetowy) do węzłów i maszyn wirtualnych oferujących konkretną usługę.</span><span class="sxs-lookup"><span data-stu-id="c40ad-150">The load balancer routes external (for example, Internet) traffic to nodes and VMs offering a specific service.</span></span>

<span data-ttu-id="c40ad-151">**Azure Container Registry (ACR)** służy do przechowywania prywatnych obrazów platformy Docker i wykresów Helm, które są wdrażane w klastrze.</span><span class="sxs-lookup"><span data-stu-id="c40ad-151">**Azure Container Registry (ACR)** is used to store private Docker images and Helm charts, which are deployed to the cluster.</span></span> <span data-ttu-id="c40ad-152">Aparat AKS może uwierzytelniać się za pomocą Container Registry przy użyciu tożsamości usługi Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c40ad-152">AKS Engine can authenticate with the Container Registry using an Azure AD identity.</span></span> <span data-ttu-id="c40ad-153">Kubernetes nie wymaga ACR.</span><span class="sxs-lookup"><span data-stu-id="c40ad-153">Kubernetes doesn't require ACR.</span></span> <span data-ttu-id="c40ad-154">Możesz użyć innych rejestrów kontenerów, takich jak Docker Hub.</span><span class="sxs-lookup"><span data-stu-id="c40ad-154">You can use other container registries, such as Docker Hub.</span></span>

<span data-ttu-id="c40ad-155">**Azure Repos** to zestaw narzędzi do kontroli wersji, których można użyć do zarządzania kodem.</span><span class="sxs-lookup"><span data-stu-id="c40ad-155">**Azure Repos** is a set of version control tools that you can use to manage your code.</span></span> <span data-ttu-id="c40ad-156">Możesz również korzystać z usługi GitHub lub innych repozytoriów opartych na git.</span><span class="sxs-lookup"><span data-stu-id="c40ad-156">You can also use GitHub or other git-based repositories.</span></span> <span data-ttu-id="c40ad-157">Przejdź do [omówienia Azure Repos](/azure/devops/repos/get-started/what-is-repos) , aby dowiedzieć się więcej.</span><span class="sxs-lookup"><span data-stu-id="c40ad-157">Go to [Azure Repos Overview](/azure/devops/repos/get-started/what-is-repos) to learn more.</span></span>

<span data-ttu-id="c40ad-158">**Azure Pipelines** jest częścią Azure DevOps Services i uruchamia zautomatyzowane kompilacje, testy i wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="c40ad-158">**Azure Pipelines** is part of Azure DevOps Services and runs automated builds, tests, and deployments.</span></span> <span data-ttu-id="c40ad-159">Możesz również używać rozwiązań CI/CD innych firm, takich jak Jenkins.</span><span class="sxs-lookup"><span data-stu-id="c40ad-159">You can also use third-party CI/CD solutions such as Jenkins.</span></span> <span data-ttu-id="c40ad-160">Przejdź do [omówienia usługi Azure Pipeline](/azure/devops/pipelines/get-started/what-is-azure-pipelines) , aby dowiedzieć się więcej.</span><span class="sxs-lookup"><span data-stu-id="c40ad-160">Go to [Azure Pipeline Overview](/azure/devops/pipelines/get-started/what-is-azure-pipelines) to learn more.</span></span>

<span data-ttu-id="c40ad-161">**Azure monitor** zbiera i przechowuje metryki i dzienniki, w tym metryki platformy dla usług platformy Azure w ramach telemetrii rozwiązania i aplikacji.</span><span class="sxs-lookup"><span data-stu-id="c40ad-161">**Azure Monitor** collects and stores metrics and logs, including platform metrics for the Azure services in the solution and application telemetry.</span></span> <span data-ttu-id="c40ad-162">Te dane służą do monitorowania aplikacji, konfigurowania alertów i pulpitów nawigacyjnych oraz wykonywania analizy głównych przyczyn błędów.</span><span class="sxs-lookup"><span data-stu-id="c40ad-162">Use this data to monitor the application, set up alerts and dashboards, and perform root cause analysis of failures.</span></span> <span data-ttu-id="c40ad-163">Azure Monitor integruje się z usługą Kubernetes, aby zbierać metryki z kontrolerów, węzłów i kontenerów, a także dzienników kontenerów i dzienników węzłów głównych.</span><span class="sxs-lookup"><span data-stu-id="c40ad-163">Azure Monitor integrates with Kubernetes to collect metrics from controllers, nodes, and containers, as well as container logs and master node logs.</span></span> <span data-ttu-id="c40ad-164">Przejdź do [omówienia Azure monitor](/azure/azure-monitor/overview) , aby dowiedzieć się więcej.</span><span class="sxs-lookup"><span data-stu-id="c40ad-164">Go to [Azure Monitor Overview](/azure/azure-monitor/overview) to learn more.</span></span>

<span data-ttu-id="c40ad-165">**Usługa Azure Traffic Manager** to oparty na systemie DNS moduł równoważenia obciążenia, który umożliwia optymalne dystrybuowanie ruchu do usług w różnych regionach platformy Azure lub wdrożeniach centrów Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="c40ad-165">**Azure Traffic Manager** is a DNS-based traffic load balancer that enables you to distribute traffic optimally to services across different Azure regions or Azure Stack Hub deployments.</span></span> <span data-ttu-id="c40ad-166">Traffic Manager zapewnia również wysoką dostępność i czas odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="c40ad-166">Traffic Manager also provides high availability and responsiveness.</span></span> <span data-ttu-id="c40ad-167">Punkty końcowe aplikacji muszą być dostępne z zewnątrz.</span><span class="sxs-lookup"><span data-stu-id="c40ad-167">The application endpoints must be accessible from the outside.</span></span> <span data-ttu-id="c40ad-168">Dostępne są również inne rozwiązania lokalne.</span><span class="sxs-lookup"><span data-stu-id="c40ad-168">There are other on-premises solutions available as well.</span></span>

<span data-ttu-id="c40ad-169">**Kontroler** transferu danych przychodzących Kubernetes ujawnia trasy http (S) do usług w klastrze Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="c40ad-169">**Kubernetes Ingress Controller** exposes HTTP(S) routes to services in a Kubernetes cluster.</span></span> <span data-ttu-id="c40ad-170">W tym celu można użyć Nginx lub dowolnego odpowiedniego kontrolera transferu danych przychodzących.</span><span class="sxs-lookup"><span data-stu-id="c40ad-170">Nginx or any suitable ingress controller can be used for this purpose.</span></span>

<span data-ttu-id="c40ad-171">**Helm** to Menedżer pakietów dla wdrożenia Kubernetes, który umożliwia łączenie różnych obiektów Kubernetes, takich jak wdrożenia, usługi, wpisy tajne, w jednym "wykresie".</span><span class="sxs-lookup"><span data-stu-id="c40ad-171">**Helm** is a package manager for Kubernetes deployment, providing a way to bundle different Kubernetes objects like Deployments, Services, Secrets, into a single "chart".</span></span> <span data-ttu-id="c40ad-172">Możesz publikować, wdrażać i kontrolować Zarządzanie wersjami oraz aktualizować obiekt wykresu.</span><span class="sxs-lookup"><span data-stu-id="c40ad-172">You can publish, deploy, control version management, and update a chart  object.</span></span> <span data-ttu-id="c40ad-173">Azure Container Registry może służyć jako repozytorium do przechowywania spakowanych wykresów Helm.</span><span class="sxs-lookup"><span data-stu-id="c40ad-173">Azure Container Registry can be used as a repository to store packaged Helm Charts.</span></span>

## <a name="design-considerations"></a><span data-ttu-id="c40ad-174">Zagadnienia dotyczące projektowania</span><span class="sxs-lookup"><span data-stu-id="c40ad-174">Design considerations</span></span>

<span data-ttu-id="c40ad-175">Ten wzorzec jest zgodny z kilkoma zagadnieniami wysokiego poziomu wyjaśnionymi bardziej szczegółowo w następnych sekcjach tego artykułu:</span><span class="sxs-lookup"><span data-stu-id="c40ad-175">This pattern follows a few high-level considerations explained in more detail in the next sections of this article:</span></span>

- <span data-ttu-id="c40ad-176">Aplikacja używa rozwiązań natywnych Kubernetes, aby uniknąć zablokowania dostawcy.</span><span class="sxs-lookup"><span data-stu-id="c40ad-176">The application uses Kubernetes-native solutions, to avoid vendor lock-in.</span></span>
- <span data-ttu-id="c40ad-177">Aplikacja używa architektury mikrousług.</span><span class="sxs-lookup"><span data-stu-id="c40ad-177">The application uses a microservices architecture.</span></span>
- <span data-ttu-id="c40ad-178">Centrum Azure Stack nie wymaga ruchu przychodzącego, ale umożliwia wychodzące połączenie z Internetem.</span><span class="sxs-lookup"><span data-stu-id="c40ad-178">Azure Stack Hub doesn't need inbound but allows outbound Internet connectivity.</span></span>

<span data-ttu-id="c40ad-179">Te zalecenia praktyczne dotyczą również rzeczywistych obciążeń i scenariuszy.</span><span class="sxs-lookup"><span data-stu-id="c40ad-179">These recommended practices will apply to real-world workloads and scenarios as well.</span></span>

## <a name="scalability-considerations"></a><span data-ttu-id="c40ad-180">Zagadnienia dotyczące skalowalności</span><span class="sxs-lookup"><span data-stu-id="c40ad-180">Scalability considerations</span></span>

<span data-ttu-id="c40ad-181">Skalowalność jest ważna, aby zapewnić użytkownikom spójny, niezawodny i wydajny dostęp do aplikacji.</span><span class="sxs-lookup"><span data-stu-id="c40ad-181">Scalability is important to provide users consistent, reliable, and well-performing access to the application.</span></span>

<span data-ttu-id="c40ad-182">Przykładowy scenariusz obejmuje skalowalność wielu warstw stosu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="c40ad-182">The sample scenario covers scalability on multiple layers of the application stack.</span></span> <span data-ttu-id="c40ad-183">Poniżej przedstawiono ogólne omówienie różnych warstw:</span><span class="sxs-lookup"><span data-stu-id="c40ad-183">Here's a high-level overview of the different layers:</span></span>

| <span data-ttu-id="c40ad-184">Poziom architektury</span><span class="sxs-lookup"><span data-stu-id="c40ad-184">Architecture level</span></span> | <span data-ttu-id="c40ad-185">Mową</span><span class="sxs-lookup"><span data-stu-id="c40ad-185">Affects</span></span> | <span data-ttu-id="c40ad-186">Jak to zrobić?</span><span class="sxs-lookup"><span data-stu-id="c40ad-186">How?</span></span> |
| --- | --- | ---
| <span data-ttu-id="c40ad-187">Aplikacja</span><span class="sxs-lookup"><span data-stu-id="c40ad-187">Application</span></span> | <span data-ttu-id="c40ad-188">Aplikacja</span><span class="sxs-lookup"><span data-stu-id="c40ad-188">Application</span></span> | <span data-ttu-id="c40ad-189">Skalowanie w poziomie na podstawie liczby zasobników/replik/Container Instances \*</span><span class="sxs-lookup"><span data-stu-id="c40ad-189">Horizontal scaling based on the number of Pods/Replicas/Container Instances\*</span></span> |
| <span data-ttu-id="c40ad-190">Klaster</span><span class="sxs-lookup"><span data-stu-id="c40ad-190">Cluster</span></span> | <span data-ttu-id="c40ad-191">Klaster Kubernetes</span><span class="sxs-lookup"><span data-stu-id="c40ad-191">Kubernetes cluster</span></span> | <span data-ttu-id="c40ad-192">Liczba węzłów (z zakresu od 1 do 50), maszyna wirtualna — rozmiar jednostki SKU i pule węzłów (aparat AKS w centrum Azure Stack obecnie obsługuje tylko jedną pulę węzłów); Korzystanie z polecenia skalowania aparatu AKS (ręczne)</span><span class="sxs-lookup"><span data-stu-id="c40ad-192">Number of Nodes (between 1 and 50), VM-SKU-sizes, and Node Pools (AKS Engine on Azure Stack Hub currently supports only a single node pool); using AKS Engine's scale command (manual)</span></span> |
| <span data-ttu-id="c40ad-193">Infrastruktura</span><span class="sxs-lookup"><span data-stu-id="c40ad-193">Infrastructure</span></span> | <span data-ttu-id="c40ad-194">Azure Stack Hub</span><span class="sxs-lookup"><span data-stu-id="c40ad-194">Azure Stack Hub</span></span> | <span data-ttu-id="c40ad-195">Liczba węzłów, pojemności i jednostek skalowania w ramach wdrożenia centrum Azure Stack</span><span class="sxs-lookup"><span data-stu-id="c40ad-195">Number of nodes, capacity, and scale units within an Azure Stack Hub deployment</span></span> |

<span data-ttu-id="c40ad-196">\* Korzystanie z Kubernetes "poziome pod skalowaniem automatycznym (HPA); Automatyczne skalowanie oparte na pomiarach lub skalowanie w pionie przez zmianę wielkości wystąpień kontenera (procesor/pamięć).</span><span class="sxs-lookup"><span data-stu-id="c40ad-196">\* Using Kubernetes' Horizontal Pod Autoscaler (HPA); automated metric-based scaling or vertical scaling by sizing the container instances (cpu/memory).</span></span>

<span data-ttu-id="c40ad-197">**Centrum Azure Stack (poziom infrastruktury)**</span><span class="sxs-lookup"><span data-stu-id="c40ad-197">**Azure Stack Hub (infrastructure level)**</span></span>

<span data-ttu-id="c40ad-198">Infrastruktura Centrum Azure Stack jest podstawą tej implementacji, ponieważ usługa Azure Stack Hub działa na sprzęcie fizycznym w centrum danych.</span><span class="sxs-lookup"><span data-stu-id="c40ad-198">The Azure Stack Hub infrastructure is the foundation of this implementation, because Azure Stack Hub runs on physical hardware in a datacenter.</span></span> <span data-ttu-id="c40ad-199">Podczas wybierania sprzętu centrum należy wybrać opcje dla procesora CPU, gęstości pamięci, konfiguracji magazynu i liczby serwerów.</span><span class="sxs-lookup"><span data-stu-id="c40ad-199">When selecting your Hub hardware, you need to make choices for CPU, memory density, storage configuration, and number of servers.</span></span> <span data-ttu-id="c40ad-200">Aby dowiedzieć się więcej o skalowalności centrum Azure Stack, zapoznaj się z następującymi zasobami:</span><span class="sxs-lookup"><span data-stu-id="c40ad-200">To learn more about Azure Stack Hub's scalability, check out the following resources:</span></span>

- [<span data-ttu-id="c40ad-201">Planowanie pojemności dla centrum Azure Stack — Omówienie</span><span class="sxs-lookup"><span data-stu-id="c40ad-201">Capacity planning for Azure Stack Hub overview</span></span>](/azure-stack/operator/azure-stack-capacity-planning-overview)
- [<span data-ttu-id="c40ad-202">Dodawanie dodatkowych węzłów jednostki skalowania w Azure Stack Hub</span><span class="sxs-lookup"><span data-stu-id="c40ad-202">Add additional scale unit nodes in Azure Stack Hub</span></span>](/azure-stack/operator/azure-stack-add-scale-node)

<span data-ttu-id="c40ad-203">**Klaster Kubernetes (poziom klastra)**</span><span class="sxs-lookup"><span data-stu-id="c40ad-203">**Kubernetes cluster (cluster level)**</span></span>

<span data-ttu-id="c40ad-204">Sam klaster Kubernetes składa się z programu i jest oparty na platformie Azure (stack) IaaS Components, w tym w przypadku zasobów obliczeniowych, magazynu i sieci.</span><span class="sxs-lookup"><span data-stu-id="c40ad-204">The Kubernetes cluster itself consists of, and is built on top of Azure (Stack) IaaS components including compute, storage, and network resources.</span></span> <span data-ttu-id="c40ad-205">Rozwiązania Kubernetes obejmują węzły główne i procesy robocze, które są wdrażane jako maszyny wirtualne na platformie Azure (i w centrum Azure Stackm).</span><span class="sxs-lookup"><span data-stu-id="c40ad-205">Kubernetes solutions involve master and worker nodes, which are deployed as VMs in Azure (and Azure Stack Hub).</span></span>

- <span data-ttu-id="c40ad-206">[Węzły płaszczyzny kontroli](/azure/aks/concepts-clusters-workloads#control-plane) (Master) zapewniają podstawowe usługi Kubernetes i aranżację obciążeń aplikacji.</span><span class="sxs-lookup"><span data-stu-id="c40ad-206">[Control plane nodes](/azure/aks/concepts-clusters-workloads#control-plane) (master) provide the core Kubernetes services and orchestration of application workloads.</span></span>
- <span data-ttu-id="c40ad-207">[Węzły procesu roboczego](/azure/aks/concepts-clusters-workloads#nodes-and-node-pools) (Worker) uruchamiają obciążenia aplikacji.</span><span class="sxs-lookup"><span data-stu-id="c40ad-207">[Worker nodes](/azure/aks/concepts-clusters-workloads#nodes-and-node-pools) (worker) run your application workloads.</span></span>

<span data-ttu-id="c40ad-208">W przypadku wybrania rozmiarów maszyn wirtualnych dla początkowego wdrożenia należy wziąć pod uwagę kilka kwestii:</span><span class="sxs-lookup"><span data-stu-id="c40ad-208">When selecting VM sizes for the initial deployment, there are several considerations:</span></span>  

- <span data-ttu-id="c40ad-209">**Koszt** — w przypadku planowania węzłów procesu roboczego Pamiętaj o całkowitym koszcie za maszynę wirtualną, która zostanie naliczone.</span><span class="sxs-lookup"><span data-stu-id="c40ad-209">**Cost** - When planning your worker nodes, keep in mind the overall cost per VM you'll incur.</span></span> <span data-ttu-id="c40ad-210">Na przykład jeśli obciążenia aplikacji wymagają ograniczonych zasobów, należy zaplanować wdrożenie maszyn wirtualnych o mniejszych rozmiarach.</span><span class="sxs-lookup"><span data-stu-id="c40ad-210">For example, if your application workloads require limited resources, you should plan to deploy smaller sized VMs.</span></span> <span data-ttu-id="c40ad-211">Usługa Azure Stack Hub, taka jak Azure, jest zwykle rozliczana na podstawie zużycia, więc odpowiednie rozmiary maszyn wirtualnych dla ról Kubernetes ma kluczowe znaczenie dla optymalizacji kosztów użycia.</span><span class="sxs-lookup"><span data-stu-id="c40ad-211">Azure Stack Hub, like Azure, is normally billed on a consumption basis, so appropriately sizing the VMs for Kubernetes roles is crucial to optimizing consumption costs.</span></span> 

- <span data-ttu-id="c40ad-212">**Skalowalność** — skalowalność klastra jest osiągana przez skalowanie w i wypełnianie liczby węzłów głównych i procesów roboczych lub przez dodanie dodatkowych pul węzłów (niedostępnych w centrum Azure Stackm dzisiaj).</span><span class="sxs-lookup"><span data-stu-id="c40ad-212">**Scalability** - Scalability of the cluster is achieved by scaling in and out the number of master and worker nodes, or by adding additional node pools (not available on Azure Stack Hub today).</span></span> <span data-ttu-id="c40ad-213">Skalowanie klastra może odbywać się na podstawie danych wydajności zebranych za pomocą usługi Container Insights (Azure Monitor + Log Analytics).</span><span class="sxs-lookup"><span data-stu-id="c40ad-213">Scaling the cluster can be done based on performance data, collected using Container Insights (Azure Monitor + Log Analytics).</span></span> 

    <span data-ttu-id="c40ad-214">Jeśli aplikacja wymaga więcej (lub mniej) zasobów, można skalować w poziomie bieżące węzły (lub w dół) dla obu węzłów (od 1 do 50 węzłów).</span><span class="sxs-lookup"><span data-stu-id="c40ad-214">If your application needs more (or fewer) resources, you can scale out (or in) your current nodes horizontally (between 1 and 50 nodes).</span></span> <span data-ttu-id="c40ad-215">Jeśli potrzebujesz więcej niż 50 węzłów, możesz utworzyć dodatkowy klaster w oddzielnej subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="c40ad-215">If you need more than 50 nodes, you can create an additional cluster in a separate subscription.</span></span> <span data-ttu-id="c40ad-216">Nie można skalować w górę rzeczywistych maszyn wirtualnych do innego rozmiaru maszyny wirtualnej bez ponownego wdrożenia klastra.</span><span class="sxs-lookup"><span data-stu-id="c40ad-216">You can't scale up the actual VMs vertically to another VM size without redeploying the cluster.</span></span>

    <span data-ttu-id="c40ad-217">Skalowanie jest wykonywane ręcznie przy użyciu maszyny wirtualnej pomocnika aparatu AKS, która została wcześniej użyta do wdrożenia klastra Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="c40ad-217">Scaling is done manually using the AKS Engine helper VM that was used to deploy the Kubernetes cluster initially.</span></span> <span data-ttu-id="c40ad-218">Aby uzyskać więcej informacji, zobacz [skalowanie klastrów Kubernetes](https://github.com/Azure/aks-engine/blob/master/docs/topics/scale.md)</span><span class="sxs-lookup"><span data-stu-id="c40ad-218">For more information, see [Scaling Kubernetes clusters](https://github.com/Azure/aks-engine/blob/master/docs/topics/scale.md)</span></span>

- <span data-ttu-id="c40ad-219">**Przydziały** — Uwzględnij [limity przydziału](/azure-stack/operator/azure-stack-quota-types) SKONFIGUROWANE podczas planowania wdrożenia AKS w centrum Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="c40ad-219">**Quotas** - Consider the [quotas](/azure-stack/operator/azure-stack-quota-types) you've configured when planning out an AKS deployment on your Azure Stack Hub.</span></span> <span data-ttu-id="c40ad-220">Upewnij się, że każda [subskrypcja](/azure-stack/operator/service-plan-offer-subscription-overview) ma odpowiednie plany i skonfigurowane limity przydziału.</span><span class="sxs-lookup"><span data-stu-id="c40ad-220">Make sure each [subscription](/azure-stack/operator/service-plan-offer-subscription-overview) has the proper plans and the quotas configured.</span></span> <span data-ttu-id="c40ad-221">Subskrypcja będzie musiała obsłużyć ilość zasobów obliczeniowych, magazynu i innych usług potrzebnych dla klastrów w miarę skalowania w poziomie.</span><span class="sxs-lookup"><span data-stu-id="c40ad-221">The subscription will need to accommodate the amount of compute, storage, and other services needed for your clusters as they scale out.</span></span>

- <span data-ttu-id="c40ad-222">**Obciążenia aplikacji** — zapoznaj się z [pojęciami dotyczącymi klastrów i obciążeń](/azure/aks/concepts-clusters-workloads#nodes-and-node-pools) w Kubernetes podstawowych koncepcji dotyczących dokumentu usługi Azure Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="c40ad-222">**Application workloads** - Refer to the [Clusters and workloads concepts](/azure/aks/concepts-clusters-workloads#nodes-and-node-pools) in the Kubernetes core concepts for Azure Kubernetes Service document.</span></span> <span data-ttu-id="c40ad-223">Ten artykuł ułatwi Określanie rozmiaru maszyny wirtualnej w zależności od potrzeb obliczeniowych i pamięci aplikacji.</span><span class="sxs-lookup"><span data-stu-id="c40ad-223">This article will help you scope the proper VM size based on the compute and memory needs of your application.</span></span>  

<span data-ttu-id="c40ad-224">**Aplikacja (poziom aplikacji)**</span><span class="sxs-lookup"><span data-stu-id="c40ad-224">**Application (application level)**</span></span>

<span data-ttu-id="c40ad-225">W warstwie aplikacji używamy funkcji [automatycznego skalowania w poziomie Kubernetes (HPA)](https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/).</span><span class="sxs-lookup"><span data-stu-id="c40ad-225">On the application layer, we use Kubernetes [Horizontal Pod Autoscaler (HPA)](https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/).</span></span> <span data-ttu-id="c40ad-226">HPA może zwiększyć lub zmniejszyć liczbę replik (pod/Container Instances) w naszym wdrożeniu na podstawie różnych metryk (takich jak użycie procesora CPU).</span><span class="sxs-lookup"><span data-stu-id="c40ad-226">HPA can increase or decrease the number of Replicas (Pod/Container Instances) in our deployment based on different metrics (like CPU utilization).</span></span>

<span data-ttu-id="c40ad-227">Kolejną opcją jest skalowanie wystąpień kontenerów w pionie.</span><span class="sxs-lookup"><span data-stu-id="c40ad-227">Another option is to scale container instances vertically.</span></span> <span data-ttu-id="c40ad-228">Można to osiągnąć przez zmianę ilości procesora i pamięci wymaganej do określonego wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="c40ad-228">This can be accomplished by changing the amount of CPU and Memory requested and available for a specific deployment.</span></span> <span data-ttu-id="c40ad-229">Aby dowiedzieć się więcej, zobacz [Zarządzanie zasobami dla kontenerów](https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/) w witrynie Kubernetes.IO.</span><span class="sxs-lookup"><span data-stu-id="c40ad-229">See [Managing Resources for Containers](https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/) on kubernetes.io to learn more.</span></span>

## <a name="networking-and-connectivity-considerations"></a><span data-ttu-id="c40ad-230">Zagadnienia dotyczące sieci i łączności</span><span class="sxs-lookup"><span data-stu-id="c40ad-230">Networking and connectivity considerations</span></span>

<span data-ttu-id="c40ad-231">Sieci i łączności mają również wpływ na trzy warstwy wymienione wcześniej dla Kubernetes w centrum Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="c40ad-231">Networking and connectivity also affect the three layers mentioned previously for Kubernetes on Azure Stack Hub.</span></span> <span data-ttu-id="c40ad-232">W poniższej tabeli przedstawiono warstwy i usługi, które zawierają:</span><span class="sxs-lookup"><span data-stu-id="c40ad-232">The following table shows the layers and which services they contain:</span></span>

| <span data-ttu-id="c40ad-233">Warstwa</span><span class="sxs-lookup"><span data-stu-id="c40ad-233">Layer</span></span> | <span data-ttu-id="c40ad-234">Mową</span><span class="sxs-lookup"><span data-stu-id="c40ad-234">Affects</span></span> | <span data-ttu-id="c40ad-235">Co?</span><span class="sxs-lookup"><span data-stu-id="c40ad-235">What?</span></span> |
| --- | --- | ---
| <span data-ttu-id="c40ad-236">Aplikacja</span><span class="sxs-lookup"><span data-stu-id="c40ad-236">Application</span></span> | <span data-ttu-id="c40ad-237">Aplikacja</span><span class="sxs-lookup"><span data-stu-id="c40ad-237">Application</span></span> | <span data-ttu-id="c40ad-238">Jak jest dostępna aplikacja?</span><span class="sxs-lookup"><span data-stu-id="c40ad-238">How is the application accessible?</span></span> <span data-ttu-id="c40ad-239">Czy będzie on widoczny dla Internetu?</span><span class="sxs-lookup"><span data-stu-id="c40ad-239">Will it be exposed to the Internet?</span></span> |
| <span data-ttu-id="c40ad-240">Klaster</span><span class="sxs-lookup"><span data-stu-id="c40ad-240">Cluster</span></span> | <span data-ttu-id="c40ad-241">Klaster Kubernetes</span><span class="sxs-lookup"><span data-stu-id="c40ad-241">Kubernetes cluster</span></span> | <span data-ttu-id="c40ad-242">Interfejs API Kubernetes, maszyna wirtualna z aparatem AKS, ściąganie obrazów kontenera (ruch wychodzący), wysyłanie danych monitorowania i telemetrię (ruch wychodzący)</span><span class="sxs-lookup"><span data-stu-id="c40ad-242">Kubernetes API, AKS Engine VM, Pulling container images (egress), Sending monitoring data and telemetry (egress)</span></span> |
| <span data-ttu-id="c40ad-243">Infrastruktura</span><span class="sxs-lookup"><span data-stu-id="c40ad-243">Infrastructure</span></span> | <span data-ttu-id="c40ad-244">Azure Stack Hub</span><span class="sxs-lookup"><span data-stu-id="c40ad-244">Azure Stack Hub</span></span> | <span data-ttu-id="c40ad-245">Ułatwienia dostępu do punktów końcowych zarządzania centrum Azure Stack, takich jak portal i punkty końcowe Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="c40ad-245">Accessibility of the Azure Stack Hub management endpoints like the portal and Azure Resource Manager endpoints.</span></span> |

<span data-ttu-id="c40ad-246">**Aplikacja**</span><span class="sxs-lookup"><span data-stu-id="c40ad-246">**Application**</span></span>

<span data-ttu-id="c40ad-247">W przypadku warstwy aplikacji Najważniejszym zagadnieniem jest to, czy aplikacja jest udostępniana i dostępna z Internetu.</span><span class="sxs-lookup"><span data-stu-id="c40ad-247">For the application layer, the most important consideration is whether the application is exposed and accessible from the Internet.</span></span> <span data-ttu-id="c40ad-248">Z perspektywy Kubernetes dostępność Internetu oznacza ujawnienie wdrożenia lub użycie usługi Kubernetes lub kontrolera transferu danych przychodzących.</span><span class="sxs-lookup"><span data-stu-id="c40ad-248">From a Kubernetes perspective, Internet accessibility means exposing a deployment or pod using a Kubernetes Service or an Ingress Controller.</span></span>

> [!NOTE]
> <span data-ttu-id="c40ad-249">Zalecamy użycie kontrolerów transferu danych przychodzących, aby udostępnić usługi Kubernetes Services, ponieważ liczba publicznych adresów IP frontonu w Azure Stack Hub jest ograniczona do 5.</span><span class="sxs-lookup"><span data-stu-id="c40ad-249">We recommend the use of Ingress controllers to expose Kubernetes Services as the number of Frontend public IPs on Azure Stack Hub is limited to 5.</span></span> <span data-ttu-id="c40ad-250">Ten projekt ogranicza także liczbę usług Kubernetes (z typem modułu równoważenia obciążenia) do 5, który będzie zbyt mały dla wielu wdrożeń.</span><span class="sxs-lookup"><span data-stu-id="c40ad-250">This design also limits the number of Kubernetes Services (with the type LoadBalancer) to 5, which will be too small for many deployments.</span></span> <span data-ttu-id="c40ad-251">Przejdź do [dokumentacji aparatu AKS](https://github.com/Azure/aks-engine/blob/master/docs/topics/azure-stack.md#limited-number-of-frontend-public-ips) , aby dowiedzieć się więcej.</span><span class="sxs-lookup"><span data-stu-id="c40ad-251">Go to the [AKS Engine documentation](https://github.com/Azure/aks-engine/blob/master/docs/topics/azure-stack.md#limited-number-of-frontend-public-ips) to learn more.</span></span>

<span data-ttu-id="c40ad-252">Udostępnianie aplikacji przy użyciu publicznego adresu IP za pośrednictwem Load Balancer lub kontroler transferu danych przychodzących nie nessecarily oznacza, że aplikacja jest teraz dostępna za pośrednictwem Internetu.</span><span class="sxs-lookup"><span data-stu-id="c40ad-252">Exposing an application using a public IP via a Load Balancer or an Ingress Controller doesn't nessecarily mean that the application is now accessible via the Internet.</span></span> <span data-ttu-id="c40ad-253">Istnieje możliwość, że centrum Azure Stack ma publiczny adres IP, który jest widoczny tylko w lokalnym intranecie, a nie wszystkie publiczne adresy IP są naprawdę dostępne z Internetu.</span><span class="sxs-lookup"><span data-stu-id="c40ad-253">It's possible for Azure Stack Hub to have a public IP address that is only visible on the local intranet - not all public IPs are truly Internet-facing.</span></span>

<span data-ttu-id="c40ad-254">Poprzedni blok uwzględnia ruch przychodzący do aplikacji.</span><span class="sxs-lookup"><span data-stu-id="c40ad-254">The previous block considers ingress traffic to the application.</span></span> <span data-ttu-id="c40ad-255">Innym tematem, który należy wziąć pod uwagę w przypadku pomyślnego wdrożenia Kubernetes, jest ruch wychodzący/wyjściowy.</span><span class="sxs-lookup"><span data-stu-id="c40ad-255">Another topic that must be considered for a successful Kubernetes deployment is outbound/egress traffic.</span></span> <span data-ttu-id="c40ad-256">Poniżej przedstawiono kilka przypadków użycia, które wymagają ruchu wychodzącego:</span><span class="sxs-lookup"><span data-stu-id="c40ad-256">Here are a few use cases that require egress traffic:</span></span>

- <span data-ttu-id="c40ad-257">Ściąganie obrazów kontenera przechowywanych w DockerHub lub Azure Container Registry</span><span class="sxs-lookup"><span data-stu-id="c40ad-257">Pulling Container Images stored on DockerHub or Azure Container Registry</span></span>
- <span data-ttu-id="c40ad-258">Pobieranie wykresów Helm</span><span class="sxs-lookup"><span data-stu-id="c40ad-258">Retrieving Helm Charts</span></span>
- <span data-ttu-id="c40ad-259">Emitowanie danych Application Insights (lub innych danych monitorowania)</span><span class="sxs-lookup"><span data-stu-id="c40ad-259">Emitting Application Insights data (or other monitoring data)</span></span>

<span data-ttu-id="c40ad-260">Niektóre środowiska korporacyjne mogą wymagać użycia _przezroczystych_ lub _nieprzezroczystych_ serwerów proxy.</span><span class="sxs-lookup"><span data-stu-id="c40ad-260">Some enterprise environments might require the use of _transparent_ or _non-transparent_ proxy servers.</span></span> <span data-ttu-id="c40ad-261">Te serwery wymagają określonej konfiguracji w różnych składnikach klastra.</span><span class="sxs-lookup"><span data-stu-id="c40ad-261">These servers require specific configuration on various components of our cluster.</span></span> <span data-ttu-id="c40ad-262">Dokumentacja aparatu AKS zawiera różne szczegóły dotyczące sposobu obsługi sieciowych serwerów proxy.</span><span class="sxs-lookup"><span data-stu-id="c40ad-262">The AKS Engine documentation contains various details on how to accommodate network proxies.</span></span> <span data-ttu-id="c40ad-263">Aby uzyskać więcej informacji, zobacz [aparat AKS i serwery proxy](https://github.com/Azure/aks-engine/blob/master/docs/topics/proxy-servers.md)</span><span class="sxs-lookup"><span data-stu-id="c40ad-263">For more details, see [AKS Engine and proxy servers](https://github.com/Azure/aks-engine/blob/master/docs/topics/proxy-servers.md)</span></span>

<span data-ttu-id="c40ad-264">Na koniec ruch między klastrami musi przepływać między wystąpieniami centrów Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="c40ad-264">Lastly, cross-cluster traffic must flow between Azure Stack Hub instances.</span></span> <span data-ttu-id="c40ad-265">Przykładowe wdrożenie składa się z pojedynczych klastrów Kubernetes działających na poszczególnych wystąpieniach centrów Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="c40ad-265">The sample deployment consists of individual Kubernetes clusters running on individual Azure Stack Hub instances.</span></span> <span data-ttu-id="c40ad-266">Ruch między nimi, taki jak ruch związany z replikacją między dwiema bazami danych, to "ruch zewnętrzny".</span><span class="sxs-lookup"><span data-stu-id="c40ad-266">Traffic between them, such as the replication traffic between two databases, is "external traffic".</span></span> <span data-ttu-id="c40ad-267">Ruch zewnętrzny musi być kierowany za pośrednictwem sieci VPN typu lokacja-lokacja lub publicznych adresów IP centrum Azure Stack, aby połączyć Kubernetes na dwóch wystąpieniach centrów Azure Stack:</span><span class="sxs-lookup"><span data-stu-id="c40ad-267">External traffic must be routed through either a Site-to-Site VPN or Azure Stack Hub Public IP addresses to connect Kubernetes on two Azure Stack Hub instances:</span></span>

![ruch między i wewnątrz klastra](media/pattern-highly-available-kubernetes/aks-inter-and-intra-cluster-traffic.png)

<span data-ttu-id="c40ad-269">**Klaster**</span><span class="sxs-lookup"><span data-stu-id="c40ad-269">**Cluster**</span></span>  

<span data-ttu-id="c40ad-270">Klaster Kubernetes nie musi być dostępny za pośrednictwem Internetu.</span><span class="sxs-lookup"><span data-stu-id="c40ad-270">The Kubernetes cluster doesn't necessarily need to be accessible via the Internet.</span></span> <span data-ttu-id="c40ad-271">Istotną częścią jest interfejs API Kubernetes używany do obsługi klastra, na przykład przy użyciu `kubectl` .</span><span class="sxs-lookup"><span data-stu-id="c40ad-271">The relevant part is the Kubernetes API used to operate a cluster, for example, using `kubectl`.</span></span> <span data-ttu-id="c40ad-272">Punkt końcowy interfejsu API Kubernetes musi być dostępny dla wszystkich użytkowników, którzy działają w klastrze, lub wdrażać na niej aplikacje i usługi.</span><span class="sxs-lookup"><span data-stu-id="c40ad-272">The Kubernetes API endpoint must be accessible to everyone who operates the cluster or deploys applications and services on top of it.</span></span> <span data-ttu-id="c40ad-273">Ten temat jest bardziej szczegółowy z perspektywy DevOps w sekcji [uwagi dotyczące wdrażania (Ci/CD)](#deployment-cicd-considerations) poniżej.</span><span class="sxs-lookup"><span data-stu-id="c40ad-273">This topic is covered in more detail from a DevOps-perspective in the [Deployment (CI/CD) considerations](#deployment-cicd-considerations) section below.</span></span>

<span data-ttu-id="c40ad-274">Na poziomie klastra istnieją również pewne zagadnienia dotyczące ruchu wychodzącego:</span><span class="sxs-lookup"><span data-stu-id="c40ad-274">On the cluster level, there are also a few considerations around egress-traffic:</span></span>

- <span data-ttu-id="c40ad-275">Aktualizacje węzła (dla Ubuntu)</span><span class="sxs-lookup"><span data-stu-id="c40ad-275">Node updates (for Ubuntu)</span></span>
- <span data-ttu-id="c40ad-276">Dane monitorowania (wysyłane do usługi Azure LogAnalytics)</span><span class="sxs-lookup"><span data-stu-id="c40ad-276">Monitoring data (sent to Azure LogAnalytics)</span></span>
- <span data-ttu-id="c40ad-277">Inni agenci wymagający ruchu wychodzącego (specyficzne dla każdego środowiska wdrażania)</span><span class="sxs-lookup"><span data-stu-id="c40ad-277">Other agents requiring outbound traffic (specific to each deployer's environment)</span></span>

<span data-ttu-id="c40ad-278">Przed wdrożeniem klastra Kubernetes przy użyciu aparatu AKS Zaplanuj ostateczny projekt sieci.</span><span class="sxs-lookup"><span data-stu-id="c40ad-278">Before you deploy your Kubernetes cluster using AKS Engine, plan for the final networking design.</span></span> <span data-ttu-id="c40ad-279">Zamiast tworzyć dedykowane Virtual Network, można bardziej wydajniej wdrożyć klaster w istniejącej sieci.</span><span class="sxs-lookup"><span data-stu-id="c40ad-279">Instead of creating a dedicated Virtual Network, it may be more efficient to deploy a cluster into an existing network.</span></span> <span data-ttu-id="c40ad-280">Można na przykład użyć istniejącego połączenia sieci VPN typu lokacja-lokacja, które zostało już skonfigurowane w środowisku centrum Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="c40ad-280">For example, you might leverage an existing Site-to-Site VPN connection already configured in your Azure Stack Hub environment.</span></span>

<span data-ttu-id="c40ad-281">**Infrastruktura**</span><span class="sxs-lookup"><span data-stu-id="c40ad-281">**Infrastructure**</span></span>  

<span data-ttu-id="c40ad-282">Infrastruktura dotyczy dostępu do punktów końcowych zarządzania centrum Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="c40ad-282">Infrastructure refers to accessing the Azure Stack Hub management endpoints.</span></span> <span data-ttu-id="c40ad-283">Punkty końcowe obejmują Portal dzierżawców i administratorów oraz punkty końcowe Azure Resource Manager administratora i dzierżawy.</span><span class="sxs-lookup"><span data-stu-id="c40ad-283">Endpoints include the tenant and admin portals, and the Azure Resource Manager admin and tenant endpoints.</span></span> <span data-ttu-id="c40ad-284">Punkty końcowe są wymagane do działania centrum Azure Stack i jego podstawowych usług.</span><span class="sxs-lookup"><span data-stu-id="c40ad-284">These endpoints are required to operate Azure Stack Hub and its core services.</span></span>

## <a name="data-and-storage-considerations"></a><span data-ttu-id="c40ad-285">Zagadnienia dotyczące danych i magazynowania</span><span class="sxs-lookup"><span data-stu-id="c40ad-285">Data and storage considerations</span></span>

<span data-ttu-id="c40ad-286">Dwa wystąpienia naszej aplikacji zostaną wdrożone w dwóch poszczególnych klastrach Kubernetes w dwóch wystąpieniach centrów Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="c40ad-286">Two instances of our application will be deployed, on two individual Kubernetes clusters, across two Azure Stack Hub instances.</span></span> <span data-ttu-id="c40ad-287">Ten projekt wymaga, aby rozważyć sposób replikowania i synchronizowania danych między nimi.</span><span class="sxs-lookup"><span data-stu-id="c40ad-287">This design will require us to consider how to replicate and synchronize data between them.</span></span>

<span data-ttu-id="c40ad-288">Na platformie Azure mamy wbudowaną funkcję replikowania magazynu między wieloma regionami i strefami w chmurze.</span><span class="sxs-lookup"><span data-stu-id="c40ad-288">With Azure, we have the built-in capability to replicate storage across multiple regions and zones within the cloud.</span></span> <span data-ttu-id="c40ad-289">Obecnie z centrum Azure Stack nie ma natywnych metod replikowania magazynu między dwoma różnymi wystąpieniami centrów Azure Stack — tworzą one dwie niezależne chmury bez konieczności zarządzania nimi jako zestaw.</span><span class="sxs-lookup"><span data-stu-id="c40ad-289">Currently with Azure Stack Hub there are no native ways to replicate storage across two different Azure Stack Hub instances - they form two independent clouds with no overarching way to manage them as a set.</span></span> <span data-ttu-id="c40ad-290">Planowanie odporności aplikacji działających w ramach usługi Azure Stack Hub wymusza tę niezależność w projekcie i wdrożeniach aplikacji.</span><span class="sxs-lookup"><span data-stu-id="c40ad-290">Planning for resiliency of applications running across Azure Stack Hub forces you to consider this independence in your application design and deployments.</span></span>

<span data-ttu-id="c40ad-291">W większości przypadków replikacja magazynu nie będzie konieczna dla aplikacji odpornej i wysokiej dostępności wdrożonej w systemie AKS.</span><span class="sxs-lookup"><span data-stu-id="c40ad-291">In most cases, storage replication won't be necessary for a resilient and highly available application deployed on AKS.</span></span> <span data-ttu-id="c40ad-292">Należy jednak wziąć pod uwagę niezależny magazyn na wystąpienie Azure Stack Hub w projekcie aplikacji.</span><span class="sxs-lookup"><span data-stu-id="c40ad-292">But you should consider independent storage per Azure Stack Hub instance in your application design.</span></span> <span data-ttu-id="c40ad-293">Jeśli ten projekt jest przeznaczonym do wdrożenia rozwiązania w centrum Azure Stack, dostępne są rozwiązania od partnerów firmy Microsoft, które udostępniają załączniki do magazynu.</span><span class="sxs-lookup"><span data-stu-id="c40ad-293">If this design is a concern or road block to deploying the solution on Azure Stack Hub, there are possible solutions from Microsoft Partners that provide storage attachments.</span></span> <span data-ttu-id="c40ad-294">Załączniki magazynu zapewniają rozwiązanie replikacji magazynu w wielu centrach Azure Stack i na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="c40ad-294">Storage attachments provide a storage replication solution across multiple Azure Stack Hubs and Azure.</span></span> <span data-ttu-id="c40ad-295">Aby uzyskać więcej informacji, zobacz [rozwiązania partnerskie](#partner-solutions).</span><span class="sxs-lookup"><span data-stu-id="c40ad-295">For more information, see the [Partner solutions](#partner-solutions).</span></span>

<span data-ttu-id="c40ad-296">W naszej architekturze są brane pod uwagę następujące warstwy:</span><span class="sxs-lookup"><span data-stu-id="c40ad-296">In our architecture, these layers were considered:</span></span>

<span data-ttu-id="c40ad-297">**Konfiguracja**</span><span class="sxs-lookup"><span data-stu-id="c40ad-297">**Configuration**</span></span>

<span data-ttu-id="c40ad-298">Konfiguracja obejmuje konfigurację centrum Azure Stack, aparatu AKS i klastra Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="c40ad-298">Configuration includes the configuration of Azure Stack Hub, AKS Engine, and the Kubernetes cluster itself.</span></span> <span data-ttu-id="c40ad-299">Konfiguracja powinna być zautomatyzowana jak najwięcej i przechowywana jako infrastruktura jako kod w systemie kontroli wersji opartej na usłudze git, takim jak Azure DevOps lub GitHub.</span><span class="sxs-lookup"><span data-stu-id="c40ad-299">The configuration should be automated as much as possible, and stored as Infrastructure-as-Code in a Git-based version control system like Azure DevOps or GitHub.</span></span> <span data-ttu-id="c40ad-300">Tych ustawień nie można łatwo synchronizować między wieloma wdrożeniami.</span><span class="sxs-lookup"><span data-stu-id="c40ad-300">These settings cannot easily be synchronized across multiple deployments.</span></span> <span data-ttu-id="c40ad-301">Dlatego zalecamy przechowywanie i stosowanie konfiguracji z zewnątrz oraz przy użyciu potoku DevOps.</span><span class="sxs-lookup"><span data-stu-id="c40ad-301">Therefore we recommend storing and applying configuration from the outside, and using DevOps pipeline.</span></span>

<span data-ttu-id="c40ad-302">**Aplikacja**</span><span class="sxs-lookup"><span data-stu-id="c40ad-302">**Application**</span></span>

<span data-ttu-id="c40ad-303">Aplikacja powinna być przechowywana w repozytorium opartym na systemie Git.</span><span class="sxs-lookup"><span data-stu-id="c40ad-303">The application should be stored in a Git-based repository.</span></span> <span data-ttu-id="c40ad-304">Za każdym razem, gdy istnieje nowe wdrożenie, zmiany aplikacji lub odzyskiwania po awarii, można je łatwo wdrożyć przy użyciu Azure Pipelines.</span><span class="sxs-lookup"><span data-stu-id="c40ad-304">Whenever there's a new deployment, changes to the application, or disaster recovery, it can be easily deployed using Azure Pipelines.</span></span>

<span data-ttu-id="c40ad-305">**Dane**</span><span class="sxs-lookup"><span data-stu-id="c40ad-305">**Data**</span></span>

<span data-ttu-id="c40ad-306">Dane to najważniejsze zagadnienia w większości projektów aplikacji.</span><span class="sxs-lookup"><span data-stu-id="c40ad-306">Data is the most important consideration in most application designs.</span></span> <span data-ttu-id="c40ad-307">Dane aplikacji muszą pozostać zsynchronizowane między różnymi wystąpieniami aplikacji.</span><span class="sxs-lookup"><span data-stu-id="c40ad-307">Application data must stay in sync between the different instances of the application.</span></span> <span data-ttu-id="c40ad-308">Dane wymagają również strategii tworzenia kopii zapasowych i odzyskiwania po awarii, jeśli wystąpi awaria.</span><span class="sxs-lookup"><span data-stu-id="c40ad-308">Data also needs a backup and disaster recovery strategy if there's an outage.</span></span>

<span data-ttu-id="c40ad-309">Osiągnięcie tego projektu jest zależne od opcji technologicznych.</span><span class="sxs-lookup"><span data-stu-id="c40ad-309">Achieving this design depends heavily on technology choices.</span></span> <span data-ttu-id="c40ad-310">Poniżej przedstawiono przykłady rozwiązań dotyczących implementowania bazy danych w trybie wysokiej dostępności na Azure Stack centrum:</span><span class="sxs-lookup"><span data-stu-id="c40ad-310">Here are some solution examples for implementing a database in a highly available fashion on Azure Stack Hub:</span></span>

- [<span data-ttu-id="c40ad-311">Wdróż grupę dostępności SQL Server 2016 na platformie Azure i w centrum Azure Stack</span><span class="sxs-lookup"><span data-stu-id="c40ad-311">Deploy a SQL Server 2016 availability group to Azure and Azure Stack Hub</span></span>](/azure-stack/hybrid/solution-deployment-guide-sql-ha)
- [<span data-ttu-id="c40ad-312">Wdróż rozwiązanie MongoDB o wysokiej dostępności na platformie Azure i w centrum Azure Stack</span><span class="sxs-lookup"><span data-stu-id="c40ad-312">Deploy a highly available MongoDB solution to Azure and Azure Stack Hub</span></span>](/azure-stack/hybrid/solution-deployment-guide-mongodb-ha)

<span data-ttu-id="c40ad-313">Zagadnienia dotyczące pracy z danymi w wielu lokalizacjach to jeszcze bardziej skomplikowany sposób rozwiązania o wysokiej dostępności i odporności.</span><span class="sxs-lookup"><span data-stu-id="c40ad-313">Considerations when working with data across multiple locations is an even more complex consideration for a highly available and resilient solution.</span></span> <span data-ttu-id="c40ad-314">Rozważ następujące kwestie:</span><span class="sxs-lookup"><span data-stu-id="c40ad-314">Consider:</span></span>

- <span data-ttu-id="c40ad-315">Opóźnienie i łączność sieciowa między centrami Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="c40ad-315">Latency and network connectivity between Azure Stack Hubs.</span></span>
- <span data-ttu-id="c40ad-316">Dostępność tożsamości dla usług i uprawnień.</span><span class="sxs-lookup"><span data-stu-id="c40ad-316">Availability of identities for services and permissions.</span></span> <span data-ttu-id="c40ad-317">Każde wystąpienie centrum Azure Stack integruje się z zewnętrznym katalogiem.</span><span class="sxs-lookup"><span data-stu-id="c40ad-317">Each Azure Stack Hub instance integrates with an external directory.</span></span> <span data-ttu-id="c40ad-318">Podczas wdrażania należy użyć jednej z Azure Active Directory (Azure AD) lub Active Directory Federation Services (AD FS).</span><span class="sxs-lookup"><span data-stu-id="c40ad-318">During deployment, you choose to use either Azure Active Directory (Azure AD) or Active Directory Federation Services (ADFS).</span></span> <span data-ttu-id="c40ad-319">W związku z tym istnieje możliwość użycia pojedynczej tożsamości, która może współdziałać z wieloma niezależnymi wystąpieniami Azure Stack Hub.</span><span class="sxs-lookup"><span data-stu-id="c40ad-319">As such, there's potential to use a single identity that can interact with multiple independent Azure Stack Hub instances.</span></span>

## <a name="business-continuity-and-disaster-recovery"></a><span data-ttu-id="c40ad-320">Ciągłość działania i odzyskiwanie po awarii</span><span class="sxs-lookup"><span data-stu-id="c40ad-320">Business continuity and disaster recovery</span></span>

<span data-ttu-id="c40ad-321">Ciągłość działania i odzyskiwanie po awarii (BCDR) to ważny temat w centrum Azure Stack i na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="c40ad-321">Business continuity and disaster recovery (BCDR) is an important topic in both Azure Stack Hub and Azure.</span></span> <span data-ttu-id="c40ad-322">Główną różnicą jest to, że w centrum Azure Stack, operator musi zarządzać całym procesem BCDR.</span><span class="sxs-lookup"><span data-stu-id="c40ad-322">The main difference is that in Azure Stack Hub, the operator must manage the whole BCDR process.</span></span> <span data-ttu-id="c40ad-323">Na platformie Azure części BCDR są zarządzane automatycznie przez firmę Microsoft.</span><span class="sxs-lookup"><span data-stu-id="c40ad-323">In Azure, parts of BCDR are automatically managed by Microsoft.</span></span>

<span data-ttu-id="c40ad-324">BCDR wpływa na te same obszary, które wymieniono w poprzedniej sekcji [zagadnienia dotyczące danych i magazynu](#data-and-storage-considerations):</span><span class="sxs-lookup"><span data-stu-id="c40ad-324">BCDR affects the same areas mentioned in the previous section [Data and storage considerations](#data-and-storage-considerations):</span></span>

- <span data-ttu-id="c40ad-325">Infrastruktura/konfiguracja</span><span class="sxs-lookup"><span data-stu-id="c40ad-325">Infrastructure / Configuration</span></span>
- <span data-ttu-id="c40ad-326">Dostępność aplikacji</span><span class="sxs-lookup"><span data-stu-id="c40ad-326">Application Availability</span></span>
- <span data-ttu-id="c40ad-327">Dane aplikacji</span><span class="sxs-lookup"><span data-stu-id="c40ad-327">Application Data</span></span>

<span data-ttu-id="c40ad-328">Jak wspomniano w poprzedniej sekcji, obszary te są odpowiedzialne za operator Azure Stack Hub i mogą się różnić między organizacjami.</span><span class="sxs-lookup"><span data-stu-id="c40ad-328">And as mentioned in the previous section, these areas are the responsibility of the Azure Stack Hub operator and can vary between organizations.</span></span> <span data-ttu-id="c40ad-329">Zaplanuj BCDR zgodnie z dostępnymi narzędziami i procesami.</span><span class="sxs-lookup"><span data-stu-id="c40ad-329">Plan BCDR according to your available tools and processes.</span></span>

<span data-ttu-id="c40ad-330">**Infrastruktura i konfiguracja**</span><span class="sxs-lookup"><span data-stu-id="c40ad-330">**Infrastructure and configuration**</span></span>

<span data-ttu-id="c40ad-331">Ta sekcja dotyczy infrastruktury fizycznej i logicznej oraz konfiguracji centrum Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="c40ad-331">This section covers the physical and logical infrastructure and the configuration of Azure Stack Hub.</span></span> <span data-ttu-id="c40ad-332">Obejmuje ona akcje administratora i miejsca dzierżawy.</span><span class="sxs-lookup"><span data-stu-id="c40ad-332">It covers actions in the admin and the tenant spaces.</span></span>

<span data-ttu-id="c40ad-333">Operator Azure Stack Hub (lub administrator) jest odpowiedzialny za konserwację wystąpień centrum Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="c40ad-333">The Azure Stack Hub operator (or administrator) is responsible for maintenance of the Azure Stack Hub instances.</span></span> <span data-ttu-id="c40ad-334">Obejmuje to między innymi składniki, takie jak sieć, magazyn, tożsamość i inne tematy, które znajdują się poza zakresem tego artykułu.</span><span class="sxs-lookup"><span data-stu-id="c40ad-334">Including components such as the network, storage, identity, and other topics that are outside the scope of this article.</span></span> <span data-ttu-id="c40ad-335">Aby dowiedzieć się więcej na temat konkretnych operacji Azure Stack Hub, zobacz następujące zasoby:</span><span class="sxs-lookup"><span data-stu-id="c40ad-335">To learn more about the specifics of Azure Stack Hub operations, see the following resources:</span></span>

- [<span data-ttu-id="c40ad-336">Odzyskiwanie danych w centrum Azure Stack przy użyciu usługi Infrastructure Backup</span><span class="sxs-lookup"><span data-stu-id="c40ad-336">Recover data in Azure Stack Hub with the Infrastructure Backup Service</span></span>](/azure-stack/operator/azure-stack-backup-infrastructure-backup)
- [<span data-ttu-id="c40ad-337">Włączanie tworzenia kopii zapasowych dla centrum Azure Stack w portalu administratora</span><span class="sxs-lookup"><span data-stu-id="c40ad-337">Enable backup for Azure Stack Hub from the administrator portal</span></span>](/azure-stack/operator/azure-stack-backup-enable-backup-console)
- [<span data-ttu-id="c40ad-338">Odzyskiwanie sprawności po utracie danych w wyniku katastrofy</span><span class="sxs-lookup"><span data-stu-id="c40ad-338">Recover from catastrophic data loss</span></span>](/azure-stack/operator/azure-stack-backup-recover-data)
- [<span data-ttu-id="c40ad-339">Najlepsze rozwiązania dotyczące usługi Infrastructure Backup</span><span class="sxs-lookup"><span data-stu-id="c40ad-339">Infrastructure Backup Service best practices</span></span>](/azure-stack/operator/azure-stack-backup-best-practices)

<span data-ttu-id="c40ad-340">Azure Stack Hub to platforma i sieć szkieletowa, w której zostaną wdrożone aplikacje Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="c40ad-340">Azure Stack Hub is the platform and fabric on which Kubernetes applications will be deployed.</span></span> <span data-ttu-id="c40ad-341">Właścicielem aplikacji Kubernetes jest użytkownik programu Azure Stack Hub z dostępem udzielonym do wdrożenia infrastruktury aplikacji wymaganej dla rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="c40ad-341">The application owner for the Kubernetes application will be a user of Azure Stack Hub, with access granted to deploy the application infrastructure needed for the solution.</span></span> <span data-ttu-id="c40ad-342">Infrastruktura aplikacji w tym przypadku oznacza klaster Kubernetes wdrożony przy użyciu aparatu AKS i otaczających usług.</span><span class="sxs-lookup"><span data-stu-id="c40ad-342">Application infrastructure in this case means the Kubernetes cluster, deployed using AKS Engine, and the surrounding services.</span></span> <span data-ttu-id="c40ad-343">Te składniki zostaną wdrożone w centrum Azure Stack, ograniczone przez ofertę Azure Stack centrum.</span><span class="sxs-lookup"><span data-stu-id="c40ad-343">These components will be deployed into Azure Stack Hub, constrained by an Azure Stack Hub offer.</span></span> <span data-ttu-id="c40ad-344">Upewnij się, że oferta zaakceptowana przez właściciela aplikacji Kubernetes ma wystarczającą pojemność (wyrażoną w przydziałach Azure Stack centrum), aby wdrożyć całe rozwiązanie.</span><span class="sxs-lookup"><span data-stu-id="c40ad-344">Make sure the offer accepted by the Kubernetes application owner has sufficient capacity (expressed in Azure Stack Hub quotas) to deploy the entire solution.</span></span> <span data-ttu-id="c40ad-345">Zgodnie z zaleceniami w poprzedniej sekcji wdrożenie aplikacji powinno być zautomatyzowane przy użyciu potoków w postaci infrastruktury jako kodu i wdrożenia, takich jak Azure DevOps Azure Pipelines.</span><span class="sxs-lookup"><span data-stu-id="c40ad-345">As recommended in the previous section, the application deployment should be automated using Infrastructure-as-Code and deployment pipelines like Azure DevOps Azure Pipelines.</span></span>

<span data-ttu-id="c40ad-346">Aby uzyskać więcej informacji na temat Azure Stack ofert i przydziałów centrum, zobacz [Azure Stack Omówienie usług centrum, planów, ofert i subskrypcji](/azure-stack/operator/service-plan-offer-subscription-overview)</span><span class="sxs-lookup"><span data-stu-id="c40ad-346">For more information on Azure Stack Hub offers and quotas, see [Azure Stack Hub services, plans, offers, and subscriptions overview](/azure-stack/operator/service-plan-offer-subscription-overview)</span></span>

<span data-ttu-id="c40ad-347">Ważne jest bezpieczne zapisywanie i przechowywanie konfiguracji aparatu AKS, w tym danych wyjściowych.</span><span class="sxs-lookup"><span data-stu-id="c40ad-347">It's important to securely save and store the AKS Engine configuration including its outputs.</span></span> <span data-ttu-id="c40ad-348">Te pliki zawierają poufne informacje służące do uzyskiwania dostępu do klastra Kubernetes, dlatego muszą być chronione przed ujawnieniem dla administratorów innych niż administratorzy.</span><span class="sxs-lookup"><span data-stu-id="c40ad-348">These files contain confidential information used to access the Kubernetes cluster, so it must be protected from being exposed to non-administrators.</span></span>

<span data-ttu-id="c40ad-349">**Dostępność aplikacji**</span><span class="sxs-lookup"><span data-stu-id="c40ad-349">**Application availability**</span></span>

<span data-ttu-id="c40ad-350">Aplikacja nie powinna polegać na kopiach zapasowych wdrożonego wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="c40ad-350">The application shouldn't rely on backups of a deployed instance.</span></span> <span data-ttu-id="c40ad-351">Zgodnie ze standardowymi metodami, należy ponownie wdrożyć aplikację w ramach wzorców infrastruktury jako kodu.</span><span class="sxs-lookup"><span data-stu-id="c40ad-351">As a standard practice, redeploy the application completely following Infrastructure-as-Code patterns.</span></span> <span data-ttu-id="c40ad-352">Na przykład Wdróż ponownie przy użyciu usługi Azure DevOps Azure Pipelines.</span><span class="sxs-lookup"><span data-stu-id="c40ad-352">For example, redeploy using Azure DevOps Azure Pipelines.</span></span> <span data-ttu-id="c40ad-353">Procedura BCDR powinna dotyczyć ponownego wdrożenia aplikacji w tym samym lub innym klastrze Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="c40ad-353">The BCDR procedure should involve the redeployment of the application to the same or another Kubernetes cluster.</span></span>

<span data-ttu-id="c40ad-354">**Dane aplikacji**</span><span class="sxs-lookup"><span data-stu-id="c40ad-354">**Application data**</span></span>

<span data-ttu-id="c40ad-355">Dane aplikacji są częścią krytyczną, aby zminimalizować utratę danych.</span><span class="sxs-lookup"><span data-stu-id="c40ad-355">Application data is the critical part to minimize data loss.</span></span> <span data-ttu-id="c40ad-356">W poprzedniej sekcji opisano metody replikowania i synchronizowania danych między dwoma (lub więcej) wystąpieniami aplikacji.</span><span class="sxs-lookup"><span data-stu-id="c40ad-356">In the previous section, techniques to replicate and synchronize data between two (or more) instances of the application were described.</span></span> <span data-ttu-id="c40ad-357">W zależności od infrastruktury bazy danych (MySQL, MongoDB, MSSQL lub innych) służącej do przechowywania danych będą dostępne różne metody dostępności bazy danych i tworzenia kopii zapasowych, które można wybrać.</span><span class="sxs-lookup"><span data-stu-id="c40ad-357">Depending on the database infrastructure (MySQL, MongoDB, MSSQL or others) used to store the data, there will be different database availability and backup techniques available to choose from.</span></span>

<span data-ttu-id="c40ad-358">Zalecanym sposobem osiągnięcia integralności jest użycie:</span><span class="sxs-lookup"><span data-stu-id="c40ad-358">The recommended ways to achieve integrity are to use either:</span></span>
- <span data-ttu-id="c40ad-359">Natywne rozwiązanie do tworzenia kopii zapasowych dla określonej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="c40ad-359">A native backup solution for the specific database.</span></span>
- <span data-ttu-id="c40ad-360">Rozwiązanie do tworzenia kopii zapasowych, które oficjalnie obsługuje tworzenie kopii zapasowych i odzyskiwanie bazy danych używanej przez aplikację.</span><span class="sxs-lookup"><span data-stu-id="c40ad-360">A backup solution that officially supports backup and recovery of the database type used by your application.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="c40ad-361">Nie przechowuj danych kopii zapasowej w tym samym wystąpieniu centrum Azure Stack, w którym znajdują się dane aplikacji.</span><span class="sxs-lookup"><span data-stu-id="c40ad-361">Do not store your backup data on the same Azure Stack Hub instance where your application data resides.</span></span> <span data-ttu-id="c40ad-362">Pełna awaria wystąpienia centrum Azure Stack również spowoduje naruszenie kopii zapasowych.</span><span class="sxs-lookup"><span data-stu-id="c40ad-362">A complete outage of the Azure Stack Hub instance would also compromise your backups.</span></span>

## <a name="availability-considerations"></a><span data-ttu-id="c40ad-363">Zagadnienia dotyczące dostępności</span><span class="sxs-lookup"><span data-stu-id="c40ad-363">Availability considerations</span></span>

<span data-ttu-id="c40ad-364">Kubernetes w centrum Azure Stack wdrożonym za pośrednictwem aparatu AKS nie jest usługą zarządzaną.</span><span class="sxs-lookup"><span data-stu-id="c40ad-364">Kubernetes on Azure Stack Hub deployed via AKS Engine isn't a managed service.</span></span> <span data-ttu-id="c40ad-365">Jest to zautomatyzowane wdrożenie i konfiguracja klastra Kubernetes przy użyciu usługi Azure Infrastructure as-a-Service (IaaS).</span><span class="sxs-lookup"><span data-stu-id="c40ad-365">It's an automated deployment and configuration of a Kubernetes cluster using Azure Infrastructure-as-a-Service (IaaS).</span></span> <span data-ttu-id="c40ad-366">W związku z tym zapewnia taką samą dostępność jak podstawowa infrastruktura.</span><span class="sxs-lookup"><span data-stu-id="c40ad-366">As such, it provides the same availability as the underlying infrastructure.</span></span>

<span data-ttu-id="c40ad-367">Infrastruktura Centrum Azure Stack jest już odporna na awarie i oferuje funkcje takie jak zestawy dostępności do dystrybucji składników w wielu [domenach błędów i aktualizacji](/azure-stack/user/azure-stack-vm-considerations#high-availability).</span><span class="sxs-lookup"><span data-stu-id="c40ad-367">Azure Stack Hub infrastructure is already resilient to failures, and provides capabilities like Availability Sets to distribute components across multiple [fault and update domains](/azure-stack/user/azure-stack-vm-considerations#high-availability).</span></span> <span data-ttu-id="c40ad-368">Jednak podstawowa technologia (klaster trybu failover) nadal wiąże się z czasem przestoju w przypadku maszyn wirtualnych na serwerze fizycznym, których dotyczy problem, jeśli wystąpi awaria sprzętowa.</span><span class="sxs-lookup"><span data-stu-id="c40ad-368">But the underlying technology (failover clustering) still incurs some downtime for VMs on an impacted physical server, if there's a hardware failure.</span></span>

<span data-ttu-id="c40ad-369">Dobrym sposobem jest wdrożenie klastra Kubernetes produkcyjny, a także obciążenia do dwóch (lub więcej) klastrów.</span><span class="sxs-lookup"><span data-stu-id="c40ad-369">It's a good practice to deploy your production Kubernetes cluster as well as the workload to two (or more) clusters.</span></span> <span data-ttu-id="c40ad-370">Te klastry powinny znajdować się w różnych lokalizacjach lub centrach danych oraz wykorzystują takie technologie jak Azure Traffic Manager, które umożliwiają kierowanie użytkowników w oparciu o czas odpowiedzi klastra lub na podstawie lokalizacji geograficznej.</span><span class="sxs-lookup"><span data-stu-id="c40ad-370">These clusters should be hosted in different locations or datacenters, and use technologies like Azure Traffic Manager to route users based on cluster response time or based on geography.</span></span>

![Używanie Traffic Manager do kontrolowania przepływów ruchu](media/pattern-highly-available-kubernetes/aks-azure-traffic-manager.png)

<span data-ttu-id="c40ad-372">Klienci, którzy mają jeden klaster Kubernetes zazwyczaj nawiązują połączenie z adresem IP usługi lub nazwą DNS danej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="c40ad-372">Customers who have a single Kubernetes cluster typically connect to the service IP or DNS name of a given application.</span></span> <span data-ttu-id="c40ad-373">W przypadku wdrożenia obejmującego wiele klastrów klienci powinni łączyć się z Traffic Manager nazwą DNS, która wskazuje usługi/ruch przychodzący w każdym klastrze Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="c40ad-373">In a multi-cluster deployment, customers should connect to a Traffic Manager DNS name that points to the services/ingress on each Kubernetes cluster.</span></span>

![Kierowanie do klastra lokalnego przy użyciu Traffic Manager](media/pattern-highly-available-kubernetes/aks-azure-traffic-manager-on-premises.png)

> [!NOTE]
> <span data-ttu-id="c40ad-375">Ten wzorzec jest również [najlepszym rozwiązaniem dla (zarządzanych) klastrów AKS na platformie Azure](/azure/aks/operator-best-practices-multi-region#plan-for-multiregion-deployment).</span><span class="sxs-lookup"><span data-stu-id="c40ad-375">This pattern is also a [best practice for (managed) AKS clusters in Azure](/azure/aks/operator-best-practices-multi-region#plan-for-multiregion-deployment).</span></span>

<span data-ttu-id="c40ad-376">Sam klaster Kubernetes wdrożony za pośrednictwem aparatu AKS powinien zawierać co najmniej trzy węzły główne i dwa węzły procesu roboczego.</span><span class="sxs-lookup"><span data-stu-id="c40ad-376">The Kubernetes cluster itself, deployed via AKS Engine, should consist of at least three master nodes and two worker nodes.</span></span>

## <a name="identity-and-security-considerations"></a><span data-ttu-id="c40ad-377">Zagadnienia dotyczące tożsamości i zabezpieczeń</span><span class="sxs-lookup"><span data-stu-id="c40ad-377">Identity and security considerations</span></span>

<span data-ttu-id="c40ad-378">Tożsamość i zabezpieczenia są ważnymi tematami.</span><span class="sxs-lookup"><span data-stu-id="c40ad-378">Identity and security are important topics.</span></span> <span data-ttu-id="c40ad-379">Szczególnie gdy rozwiązanie obejmuje niezależne wystąpienia centrów Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="c40ad-379">Especially when the solution spans independent Azure Stack Hub instances.</span></span> <span data-ttu-id="c40ad-380">Kubernetes i Azure (w tym centrum Azure Stack) mają różne mechanizmy kontroli dostępu opartej na rolach (RBAC):</span><span class="sxs-lookup"><span data-stu-id="c40ad-380">Kubernetes and Azure (including Azure Stack Hub) both have distinct mechanisms for role-based access control (RBAC):</span></span>

- <span data-ttu-id="c40ad-381">Usługa Azure RBAC kontroluje dostęp do zasobów na platformie Azure (i w centrum Azure Stack), w tym możliwość tworzenia nowych zasobów platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="c40ad-381">Azure RBAC controls access to resources in Azure (and Azure Stack Hub), including the ability to create new Azure resources.</span></span> <span data-ttu-id="c40ad-382">Uprawnienia można przypisać do użytkowników, grup lub podmiotów usługi.</span><span class="sxs-lookup"><span data-stu-id="c40ad-382">Permissions can be assigned to users, groups, or service principals.</span></span> <span data-ttu-id="c40ad-383">(Jednostka usługi jest tożsamością zabezpieczeń używaną przez aplikacje).</span><span class="sxs-lookup"><span data-stu-id="c40ad-383">(A service principal is a security identity used by applications.)</span></span>
- <span data-ttu-id="c40ad-384">Kubernetes formant RBAC kontroluje uprawnienia do interfejsu API Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="c40ad-384">Kubernetes RBAC controls permissions to the Kubernetes API.</span></span> <span data-ttu-id="c40ad-385">Na przykład tworzenie i wystawianie zasobników to akcje, które mogą być autoryzowane (lub odrzucane) do użytkownika za pomocą RBAC.</span><span class="sxs-lookup"><span data-stu-id="c40ad-385">For example, creating pods and listing pods are actions that can be authorized (or denied) to a user through RBAC.</span></span> <span data-ttu-id="c40ad-386">Aby przypisać uprawnienia Kubernetes użytkownikom, tworzysz role i powiązania ról.</span><span class="sxs-lookup"><span data-stu-id="c40ad-386">To assign Kubernetes permissions to users, you create roles and role bindings.</span></span>

<span data-ttu-id="c40ad-387">**Tożsamość centrum Azure Stack i kontrola RBAC**</span><span class="sxs-lookup"><span data-stu-id="c40ad-387">**Azure Stack Hub identity and RBAC**</span></span>

<span data-ttu-id="c40ad-388">Azure Stack Hub udostępnia dwie opcje dostawcy tożsamości.</span><span class="sxs-lookup"><span data-stu-id="c40ad-388">Azure Stack Hub provides two identity provider choices.</span></span> <span data-ttu-id="c40ad-389">Używany dostawca zależy od środowiska i od tego, czy działa w środowisku podłączonym lub rozłączonym:</span><span class="sxs-lookup"><span data-stu-id="c40ad-389">The provider you use depends on the environment and whether running in a connected or disconnected environment:</span></span>

- <span data-ttu-id="c40ad-390">Azure AD — może być używana tylko w podłączonym środowisku.</span><span class="sxs-lookup"><span data-stu-id="c40ad-390">Azure AD - can only be used in a connected environment.</span></span>
- <span data-ttu-id="c40ad-391">Usługi ADFS do tradycyjnego Active Directory lasu — mogą być używane zarówno w środowisku podłączonym, jak i rozłączonym.</span><span class="sxs-lookup"><span data-stu-id="c40ad-391">ADFS to a traditional Active Directory forest - can be used in both a connected or disconnected environment.</span></span>

<span data-ttu-id="c40ad-392">Dostawca tożsamości zarządza użytkownikami i grupami, w tym uwierzytelnianie i autoryzację w celu uzyskiwania dostępu do zasobów.</span><span class="sxs-lookup"><span data-stu-id="c40ad-392">The identity provider manages users and groups, including authentication and authorization for accessing resources.</span></span> <span data-ttu-id="c40ad-393">Można udzielić dostępu do zasobów centrum Azure Stack, takich jak subskrypcje, grupy zasobów i poszczególne zasoby, takie jak maszyny wirtualne lub moduły równoważenia obciążenia.</span><span class="sxs-lookup"><span data-stu-id="c40ad-393">Access can be granted to Azure Stack Hub resources like subscriptions, resource groups, and individual resources like VMs or load balancers.</span></span> <span data-ttu-id="c40ad-394">Aby mieć spójny model dostępu, należy rozważyć użycie tych samych grup (bezpośrednich lub zagnieżdżonych) dla wszystkich centrów Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="c40ad-394">To have a consistent access model, you should consider using the same groups (either direct or nested) for all Azure Stack Hubs.</span></span> <span data-ttu-id="c40ad-395">Oto przykład konfiguracji:</span><span class="sxs-lookup"><span data-stu-id="c40ad-395">Here's a configuration example:</span></span>

![Zagnieżdżone grupy usługi AAD za pomocą usługi Azure Stack Hub](media/pattern-highly-available-kubernetes/azure-stack-azure-ad-nested-groups.png)

<span data-ttu-id="c40ad-397">Przykład zawiera dedykowaną grupę (przy użyciu usługi AAD lub ADFS) do określonego celu.</span><span class="sxs-lookup"><span data-stu-id="c40ad-397">The example contains a dedicated group (using AAD or ADFS) for a specific purpose.</span></span> <span data-ttu-id="c40ad-398">Na przykład, aby zapewnić uprawnienia współautora dla grupy zasobów zawierającej infrastrukturę klastra Kubernetes w określonym wystąpieniu centrum Azure Stack (w tym miejscu "Współautor K8s klastra").</span><span class="sxs-lookup"><span data-stu-id="c40ad-398">For example, to provide Contributor permissions for the Resource Group that contains our Kubernetes cluster infrastructure on a specific Azure Stack Hub instance (here "Seattle K8s Cluster Contributor").</span></span> <span data-ttu-id="c40ad-399">Te grupy są następnie zagnieżdżane w grupie ogólnej zawierającej "podgrupy" poszczególnych centrów Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="c40ad-399">These groups are then nested into an overall group that contains the "subgroups" for each Azure Stack Hub.</span></span>

<span data-ttu-id="c40ad-400">Nasz przykładowy użytkownik będzie miał teraz uprawnienia "Współautor" do obu grup zasobów, które zawierają cały zestaw zasobów infrastruktury Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="c40ad-400">Our sample user will now have "Contributor" permissions to both Resources Groups that contain the entire set of Kubernetes infrastructure resources.</span></span> <span data-ttu-id="c40ad-401">Użytkownik będzie miał dostęp do zasobów w obu wystąpieniach usługi Azure Stack Hub, ponieważ wystąpienia te korzystają z tego samego dostawcy tożsamości.</span><span class="sxs-lookup"><span data-stu-id="c40ad-401">The user will have access to resources on both Azure Stack Hub instances, because the instances share the same identity provider.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="c40ad-402">Te uprawnienia mają wpływ tylko na centrum Azure Stack i niektóre z zasobów wdrożonych na tym komputerze.</span><span class="sxs-lookup"><span data-stu-id="c40ad-402">These permissions affect only Azure Stack Hub and some of the resources deployed on top of it.</span></span> <span data-ttu-id="c40ad-403">Użytkownik mający ten poziom dostępu może wykonywać wiele szkód, ale nie może uzyskać dostępu do maszyn wirtualnych Kubernetes IaaS ani do interfejsu API Kubernetes bez dodatkowego dostępu do wdrożenia Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="c40ad-403">A user who has this level of access can do a lot of harm, but cannot access the Kubernetes IaaS VMs nor the Kubernetes API without additional access to the Kubernetes deployment.</span></span>

<span data-ttu-id="c40ad-404">**Kubernetes tożsamość i RBAC**</span><span class="sxs-lookup"><span data-stu-id="c40ad-404">**Kubernetes identity and RBAC**</span></span>

<span data-ttu-id="c40ad-405">Klaster Kubernetes domyślnie nie używa tego samego dostawcy tożsamości co centrum Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="c40ad-405">A Kubernetes cluster, by default, doesn't use the same Identity Provider as the underlaying Azure Stack Hub.</span></span> <span data-ttu-id="c40ad-406">Maszyny wirtualne obsługujące klaster Kubernetes, główny i węzły procesu roboczego używają klucza SSH określonego podczas wdrażania klastra.</span><span class="sxs-lookup"><span data-stu-id="c40ad-406">The VMs hosting the Kubernetes cluster, the master, and worker nodes, use the SSH Key that is specified during the deployment of the cluster.</span></span> <span data-ttu-id="c40ad-407">Ten klucz SSH jest wymagany do nawiązania połączenia z tymi węzłami przy użyciu protokołu SSH.</span><span class="sxs-lookup"><span data-stu-id="c40ad-407">This SSH key is required to connect to these nodes using SSH.</span></span>

<span data-ttu-id="c40ad-408">Interfejs API Kubernetes (na przykład dostęp za pomocą programu `kubectl` ) jest również chroniony przez konta usług, w tym domyślne konto usługi "administrator klastra".</span><span class="sxs-lookup"><span data-stu-id="c40ad-408">The Kubernetes API (for example, accessed by using `kubectl`) is also protected by service accounts including a default "cluster admin" service account.</span></span> <span data-ttu-id="c40ad-409">Poświadczenia dla tego konta usługi są początkowo przechowywane w `.kube/config` pliku w węzłach głównych Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="c40ad-409">The credentials for this service account are initially stored in the `.kube/config` file on your Kubernetes master nodes.</span></span>

<span data-ttu-id="c40ad-410">**Zarządzanie kluczami tajnymi i poświadczenia aplikacji**</span><span class="sxs-lookup"><span data-stu-id="c40ad-410">**Secrets management and application credentials**</span></span>

<span data-ttu-id="c40ad-411">Aby przechowywać wpisy tajne, takie jak parametry połączenia lub poświadczenia bazy danych, można wybrać kilka opcji, w tym:</span><span class="sxs-lookup"><span data-stu-id="c40ad-411">To store secrets like connection strings or database credentials there are several choices, including:</span></span>

- <span data-ttu-id="c40ad-412">W usłudze Azure Key Vault</span><span class="sxs-lookup"><span data-stu-id="c40ad-412">Azure Key Vault</span></span>
- <span data-ttu-id="c40ad-413">Wpisy tajne usługi Kubernetes</span><span class="sxs-lookup"><span data-stu-id="c40ad-413">Kubernetes Secrets</span></span>
- <span data-ttu-id="c40ad-414">rozwiązania innych firm, takie jak magazyn HashiCorp (działające na Kubernetes)</span><span class="sxs-lookup"><span data-stu-id="c40ad-414">3rd-Party solutions like HashiCorp Vault (running on Kubernetes)</span></span>

<span data-ttu-id="c40ad-415">Nie przechowuj wpisów tajnych ani poświadczeń w postaci zwykłego tekstu w plikach konfiguracyjnych, kodzie aplikacji ani w skryptach.</span><span class="sxs-lookup"><span data-stu-id="c40ad-415">Do not store secrets or credentials in plaintext in your configuration files, application code, or within scripts.</span></span> <span data-ttu-id="c40ad-416">Nie należy przechowywać ich w systemie kontroli wersji.</span><span class="sxs-lookup"><span data-stu-id="c40ad-416">And do not store them in a version control system.</span></span> <span data-ttu-id="c40ad-417">Zamiast tego Automatyzacja wdrażania powinna pobrać wpisy tajne zgodnie z potrzebami.</span><span class="sxs-lookup"><span data-stu-id="c40ad-417">Instead, the deployment automation should retrieve the secrets as needed.</span></span>

## <a name="patch-and-update"></a><span data-ttu-id="c40ad-418">Poprawka i aktualizacja</span><span class="sxs-lookup"><span data-stu-id="c40ad-418">Patch and update</span></span>

<span data-ttu-id="c40ad-419">Proces **poprawek i aktualizacji (PNU)** w usłudze Azure Kubernetes Service jest częściowo zautomatyzowany.</span><span class="sxs-lookup"><span data-stu-id="c40ad-419">The **Patch and Update (PNU)** process in Azure Kubernetes Service is partially automated.</span></span> <span data-ttu-id="c40ad-420">Uaktualnienia wersji Kubernetes są wyzwalane ręcznie, podczas gdy aktualizacje zabezpieczeń są stosowane automatycznie.</span><span class="sxs-lookup"><span data-stu-id="c40ad-420">Kubernetes version upgrades are triggered manually, while security updates are applied automatically.</span></span> <span data-ttu-id="c40ad-421">Te aktualizacje mogą obejmować poprawki zabezpieczeń systemu operacyjnego lub aktualizacje jądra.</span><span class="sxs-lookup"><span data-stu-id="c40ad-421">These updates can include OS security fixes or kernel updates.</span></span> <span data-ttu-id="c40ad-422">AKS nie uruchamia automatycznie ponownie tych węzłów systemu Linux w celu ukończenia procesu aktualizacji.</span><span class="sxs-lookup"><span data-stu-id="c40ad-422">AKS doesn't automatically reboot these Linux nodes to complete the update process.</span></span> 

<span data-ttu-id="c40ad-423">Proces PNU klastra Kubernetes wdrożony przy użyciu aparatu AKS na Azure Stack Hub jest niezarządzany i jest odpowiedzialny za operator klastra.</span><span class="sxs-lookup"><span data-stu-id="c40ad-423">The PNU process for a Kubernetes cluster deployed using AKS Engine on Azure Stack Hub is unmanaged, and is the responsibility of the cluster operator.</span></span> 

<span data-ttu-id="c40ad-424">Aparat AKSa pomaga z dwoma najważniejszymi zadaniami:</span><span class="sxs-lookup"><span data-stu-id="c40ad-424">AKS Engine helps with the two most important tasks:</span></span>

- [<span data-ttu-id="c40ad-425">Uaktualnij do nowszej wersji obrazu systemu operacyjnego Kubernetes i podstawowej</span><span class="sxs-lookup"><span data-stu-id="c40ad-425">Upgrade to a newer Kubernetes and base OS image version</span></span>](/azure-stack/user/azure-stack-kubernetes-aks-engine-upgrade#steps-to-upgrade-to-a-newer-kubernetes-version)
- [<span data-ttu-id="c40ad-426">Uaktualnij tylko podstawowy obraz systemu operacyjnego</span><span class="sxs-lookup"><span data-stu-id="c40ad-426">Upgrade the base OS image only</span></span>](/azure-stack/user/azure-stack-kubernetes-aks-engine-upgrade#steps-to-only-upgrade-the-os-image)

<span data-ttu-id="c40ad-427">Nowsze obrazy podstawowe systemu operacyjnego zawierają najnowsze poprawki zabezpieczeń systemu operacyjnego i aktualizacje jądra.</span><span class="sxs-lookup"><span data-stu-id="c40ad-427">Newer base OS images contain the latest OS security fixes and kernel updates.</span></span> 

<span data-ttu-id="c40ad-428">Mechanizm [nienadzorowanego uaktualniania](https://wiki.debian.org/UnattendedUpgrades) automatycznie instaluje aktualizacje zabezpieczeń wydane przed udostępnieniem nowej wersji obrazu podstawowego systemu operacyjnego w portalu Azure Stack Hub.</span><span class="sxs-lookup"><span data-stu-id="c40ad-428">The [Unattended Upgrade](https://wiki.debian.org/UnattendedUpgrades) mechanism automatically installs security updates that are released before a new base OS image version is available in the Azure Stack Hub Marketplace.</span></span> <span data-ttu-id="c40ad-429">Uaktualnienie nienadzorowane jest domyślnie włączone i automatycznie instaluje aktualizacje zabezpieczeń, ale nie uruchamia ponownie węzłów klastra Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="c40ad-429">Unattended upgrade is enabled by default and installs security updates automatically, but does not reboot the Kubernetes cluster nodes.</span></span> <span data-ttu-id="c40ad-430">Ponowny rozruch węzłów można zautomatyzować za pomocą polecenia "Open Source [ **K** Ubernetes reboot **D** aemon (kured) **RE**](/azure/aks/node-updates-kured)".</span><span class="sxs-lookup"><span data-stu-id="c40ad-430">Rebooting the nodes can be automated using the open-source [**K** Ubernetes **RE** boot **D** aemon (kured))](/azure/aks/node-updates-kured).</span></span> <span data-ttu-id="c40ad-431">Kured czujki dla węzłów systemu Linux, które wymagają ponownego uruchomienia, a następnie automatycznie obsłużyć ponowne planowanie procesów uruchamiania i ponownego uruchamiania węzła.</span><span class="sxs-lookup"><span data-stu-id="c40ad-431">Kured watches for Linux nodes that require a reboot, then automatically handle the rescheduling of running pods and node reboot process.</span></span>

## <a name="deployment-cicd-considerations"></a><span data-ttu-id="c40ad-432">Zagadnienia dotyczące wdrażania (CI/CD)</span><span class="sxs-lookup"><span data-stu-id="c40ad-432">Deployment (CI/CD) considerations</span></span>

<span data-ttu-id="c40ad-433">Usługa Azure i Azure Stack Hub uwidaczniają te same Azure Resource Manager interfejsy API REST.</span><span class="sxs-lookup"><span data-stu-id="c40ad-433">Azure and Azure Stack Hub expose the same Azure Resource Manager REST APIs.</span></span> <span data-ttu-id="c40ad-434">Te interfejsy API są podobne do wszystkich innych chmur platformy Azure (Azure, Azure Chiny 21Vianet, Azure Government).</span><span class="sxs-lookup"><span data-stu-id="c40ad-434">These APIs are addressed like any other Azure cloud (Azure, Azure China 21Vianet, Azure Government).</span></span> <span data-ttu-id="c40ad-435">Mogą wystąpić różnice w wersjach interfejsu API między chmurami, a usługa Azure Stack Hub udostępnia tylko podzestaw usług.</span><span class="sxs-lookup"><span data-stu-id="c40ad-435">There may be differences in API versions between clouds, and Azure Stack Hub provides only a subset of services.</span></span> <span data-ttu-id="c40ad-436">Identyfikator URI punktu końcowego zarządzania jest również różny dla każdej chmury i każdego wystąpienia Azure Stack Hub.</span><span class="sxs-lookup"><span data-stu-id="c40ad-436">The management endpoint URI is also different for each cloud, and each instance of Azure Stack Hub.</span></span>

<span data-ttu-id="c40ad-437">Oprócz niewielkich różnic między wymienionymi Azure Resource Manager interfejsy API REST zapewniają spójny sposób współpracy z usługą Azure i Azure Stack Hub.</span><span class="sxs-lookup"><span data-stu-id="c40ad-437">Aside from the subtle differences mentioned, Azure Resource Manager REST APIs provide a consistent way to interact with both Azure and Azure Stack Hub.</span></span> <span data-ttu-id="c40ad-438">Ten sam zestaw narzędzi może być używany w tym miejscu, jak w przypadku dowolnej innej chmury platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="c40ad-438">The same set of tools can be used here as would be used with any other Azure cloud.</span></span> <span data-ttu-id="c40ad-439">Do wdrażania i organizowania usług w usłudze Azure Stack Hub można używać platformy Azure DevOps, narzędzi takich jak Jenkins lub PowerShell.</span><span class="sxs-lookup"><span data-stu-id="c40ad-439">You can use Azure DevOps, tools like Jenkins, or PowerShell, to deploy and orchestrate services to Azure Stack Hub.</span></span>

<span data-ttu-id="c40ad-440">**Zagadnienia do rozważenia**</span><span class="sxs-lookup"><span data-stu-id="c40ad-440">**Considerations**</span></span>

<span data-ttu-id="c40ad-441">Jedną z głównych różnic, gdy chodzi o wdrażanie w centrum Azure Stack, jest pytanie o dostępność Internetu.</span><span class="sxs-lookup"><span data-stu-id="c40ad-441">One of the major differences when it comes to Azure Stack Hub deployments is the question of Internet accessibility.</span></span> <span data-ttu-id="c40ad-442">Dostępność internetowa określa, czy należy wybrać agenta kompilacji hostowanego przez firmę Microsoft lub samodzielnego dla zadań CI/CD.</span><span class="sxs-lookup"><span data-stu-id="c40ad-442">Internet accessibility determines whether to select a Microsoft-hosted or a self-hosted build agent for your CI/CD jobs.</span></span>

<span data-ttu-id="c40ad-443">Agent samoobsługowy może działać na Azure Stack centrum (jako maszyna wirtualna IaaS) lub w podsieci sieciowej, która ma dostęp do centrum Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="c40ad-443">A self-hosted agent can run on top of Azure Stack Hub (as an IaaS VM) or in a network subnet that can access Azure Stack Hub.</span></span> <span data-ttu-id="c40ad-444">Przejdź do [Azure Pipelines agentów](/azure/devops/pipelines/agents/agents) , aby dowiedzieć się więcej o różnicach.</span><span class="sxs-lookup"><span data-stu-id="c40ad-444">Go to [Azure Pipelines agents](/azure/devops/pipelines/agents/agents) to learn more about the differences.</span></span>

<span data-ttu-id="c40ad-445">Poniższa ilustracja ułatwia podjęcie decyzji o tym, czy potrzebujesz samodzielnie hostowanego lub obsługiwanego przez firmę Microsoft agenta kompilacji:</span><span class="sxs-lookup"><span data-stu-id="c40ad-445">The following image helps you to decide if you need a self-hosted or a Microsoft-hosted build agent:</span></span>

![Samodzielne agenci kompilacji tak lub nie](media/pattern-highly-available-kubernetes/aks-on-stack-self-hosted-build-agents-yes-or-no.png)

- <span data-ttu-id="c40ad-447">Czy punkty końcowe zarządzania centrum Azure Stack są dostępne za pośrednictwem Internetu?</span><span class="sxs-lookup"><span data-stu-id="c40ad-447">Are the Azure Stack Hub management endpoints accessible via Internet?</span></span>
  - <span data-ttu-id="c40ad-448">Tak: możemy użyć Azure Pipelines z agentami hostowanymi przez firmę Microsoft w celu nawiązania połączenia z centrum Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="c40ad-448">Yes: We can use Azure Pipelines with Microsoft-hosted agents to connect to Azure Stack Hub.</span></span>
  - <span data-ttu-id="c40ad-449">Nie: potrzebujemy własnych agentów, którzy mogą łączyć się z punktami końcowymi zarządzania centrum Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="c40ad-449">No: We need self-hosted agents that can connect to Azure Stack Hub's management endpoints.</span></span>
- <span data-ttu-id="c40ad-450">Czy nasz klaster Kubernetes jest dostępny za pośrednictwem Internetu?</span><span class="sxs-lookup"><span data-stu-id="c40ad-450">Is our Kubernetes cluster accessible via the Internet?</span></span>
  - <span data-ttu-id="c40ad-451">Tak: możemy używać Azure Pipelines z agentami obsługiwanymi przez firmę Microsoft do bezpośredniej współpracy z punktem końcowym interfejsu API Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="c40ad-451">Yes: We can use Azure Pipelines with Microsoft-hosted agents to interact directly with Kubernetes API endpoint.</span></span>
  - <span data-ttu-id="c40ad-452">Nie: potrzebujemy własnych agentów, którzy mogą łączyć się z punktem końcowym interfejsu API klastra Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="c40ad-452">No: We need self-hosted Agents that can connect to the Kubernetes cluster API endpoint.</span></span>

<span data-ttu-id="c40ad-453">W scenariuszach, w których punkty końcowe zarządzania centrum Azure Stack i interfejs API Kubernetes są dostępne za pośrednictwem Internetu, wdrożenie może korzystać z agenta hostowanego przez firmę Microsoft.</span><span class="sxs-lookup"><span data-stu-id="c40ad-453">In scenarios where the Azure Stack Hub management endpoints and Kubernetes API are accessible via the internet, the deployment can use a Microsoft-hosted agent.</span></span> <span data-ttu-id="c40ad-454">To wdrożenie spowoduje zastosowanie architektury aplikacji w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="c40ad-454">This deployment will result in an application architecture as follows:</span></span>

<span data-ttu-id="c40ad-455">[![Omówienie architektury publicznej](media/pattern-highly-available-kubernetes/aks-azure-stack-app-pattern.png)](media/pattern-highly-available-kubernetes/aks-azure-stack-app-pattern.png#lightbox)</span><span class="sxs-lookup"><span data-stu-id="c40ad-455">[![Public architecture overview](media/pattern-highly-available-kubernetes/aks-azure-stack-app-pattern.png)](media/pattern-highly-available-kubernetes/aks-azure-stack-app-pattern.png#lightbox)</span></span>

<span data-ttu-id="c40ad-456">Jeśli Azure Resource Manager punkty końcowe, interfejs API Kubernetes lub oba nie są bezpośrednio dostępne za pośrednictwem Internetu, możemy wykorzystać samoobsługowy agent kompilacji do uruchomienia kroków potoku.</span><span class="sxs-lookup"><span data-stu-id="c40ad-456">If the Azure Resource Manager endpoints, Kubernetes API, or both aren't directly accessible via the Internet, we can leverage a self-hosted build agent to run the pipeline steps.</span></span> <span data-ttu-id="c40ad-457">Ten projekt wymaga mniej łączności i może zostać wdrożony tylko przy użyciu lokalnej łączności sieciowej do Azure Resource Manager punktów końcowych i interfejsu API Kubernetes:</span><span class="sxs-lookup"><span data-stu-id="c40ad-457">This design needs less connectivity, and can be deployed with only on-premises network connectivity to Azure Resource Manager endpoints and the Kubernetes API:</span></span>

<span data-ttu-id="c40ad-458">[![Omówienie architektury Premium](media/pattern-highly-available-kubernetes/aks-azure-stack-app-pattern-self-hosted.png)](media/pattern-highly-available-kubernetes/aks-azure-stack-app-pattern-self-hosted.png#lightbox)</span><span class="sxs-lookup"><span data-stu-id="c40ad-458">[![On-prem architecture overview](media/pattern-highly-available-kubernetes/aks-azure-stack-app-pattern-self-hosted.png)](media/pattern-highly-available-kubernetes/aks-azure-stack-app-pattern-self-hosted.png#lightbox)</span></span>

> [!NOTE]
> <span data-ttu-id="c40ad-459">**Co z niepołączonymi scenariuszami?**</span><span class="sxs-lookup"><span data-stu-id="c40ad-459">**What about disconnected scenarios?**</span></span> <span data-ttu-id="c40ad-460">W scenariuszach, w których Azure Stack Hub lub Kubernetes lub oba z nich nie mają punktów końcowych zarządzania dostępnych z Internetu, nadal można używać usługi Azure DevOps dla wdrożeń.</span><span class="sxs-lookup"><span data-stu-id="c40ad-460">In scenarios where either Azure Stack Hub or Kubernetes or both of them do not have internet-facing management endpoints, it is still possible to use Azure DevOps for your deployments.</span></span> <span data-ttu-id="c40ad-461">Możesz użyć samodzielnie hostowanej puli agentów (jest to Agent DevOps działający lokalnie lub w centrum Azure Stack) lub całkowicie hostowane Azure DevOps Server w środowisku lokalnym.</span><span class="sxs-lookup"><span data-stu-id="c40ad-461">You can either use a self-hosted Agent Pool (which is a DevOps Agent running on-premises or on Azure Stack Hub itself) or a completly self-hosted Azure DevOps Server on-premises.</span></span> <span data-ttu-id="c40ad-462">Agent samoobsługowy musi tylko wychodzące połączenie z Internetem HTTPS (TCP/443).</span><span class="sxs-lookup"><span data-stu-id="c40ad-462">The self-hosted agent needs only outbound HTTPS (TCP/443) Internet connectivity.</span></span>

<span data-ttu-id="c40ad-463">Wzorzec może korzystać z klastra Kubernetes (wdrożonego i zorganizowanego z aparatem AKS) w każdym wystąpieniu Azure Stack Hub.</span><span class="sxs-lookup"><span data-stu-id="c40ad-463">The pattern can use a Kubernetes cluster (deployed and orchestrated with AKS engine) on each Azure Stack Hub instance.</span></span> <span data-ttu-id="c40ad-464">Obejmuje ona aplikację składającą się z frontonu, usług zaplecza (na przykład MongoDB) i kontrolera danych wejściowych opartych na Nginx.</span><span class="sxs-lookup"><span data-stu-id="c40ad-464">It includes an application consisting of a frontend, a mid-tier, backend services (for example MongoDB), and an nginx-based Ingress Controller.</span></span> <span data-ttu-id="c40ad-465">Zamiast korzystać z bazy danych hostowanej w klastrze K8s, można wykorzystać "zewnętrzne magazyny danych".</span><span class="sxs-lookup"><span data-stu-id="c40ad-465">Instead of using a database hosted on the K8s cluster, you can leverage "external data stores".</span></span> <span data-ttu-id="c40ad-466">Opcje bazy danych obejmują MySQL, SQL Server lub dowolny rodzaj bazy danych hostowanej poza centrum Azure Stack lub w IaaS.</span><span class="sxs-lookup"><span data-stu-id="c40ad-466">Database options include MySQL, SQL Server, or any kind of database hosted outside of Azure Stack Hub or in IaaS.</span></span> <span data-ttu-id="c40ad-467">Takie konfiguracje nie należą do zakresu.</span><span class="sxs-lookup"><span data-stu-id="c40ad-467">Configurations like this aren't in scope here.</span></span>

## <a name="partner-solutions"></a><span data-ttu-id="c40ad-468">Rozwiązania partnerskie</span><span class="sxs-lookup"><span data-stu-id="c40ad-468">Partner solutions</span></span>

<span data-ttu-id="c40ad-469">Istnieją rozwiązania partnerskie firmy Microsoft, które mogą zwiększyć możliwości Centrum Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="c40ad-469">There are Microsoft Partner solutions that can extend the capabilities of Azure Stack Hub.</span></span> <span data-ttu-id="c40ad-470">Te rozwiązania okazały się przydatne w przypadku wdrożeń aplikacji działających w klastrach Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="c40ad-470">These solutions have been found useful in deployments of applications running on Kubernetes clusters.</span></span>  

## <a name="storage-and-data-solutions"></a><span data-ttu-id="c40ad-471">Magazyn i rozwiązania dotyczące danych</span><span class="sxs-lookup"><span data-stu-id="c40ad-471">Storage and data solutions</span></span>

<span data-ttu-id="c40ad-472">Zgodnie z opisem w temacie [zagadnienia dotyczące danych i magazynowania](#data-and-storage-considerations), centrum Azure Stack obecnie nie ma natywnego rozwiązania do replikowania magazynu między wieloma wystąpieniami.</span><span class="sxs-lookup"><span data-stu-id="c40ad-472">As described in [Data and storage considerations](#data-and-storage-considerations), Azure Stack Hub currently doesn't have a native solution to replicate storage across multiple instances.</span></span> <span data-ttu-id="c40ad-473">W przeciwieństwie do platformy Azure, możliwość replikowania magazynu w wielu regionach nie istnieje.</span><span class="sxs-lookup"><span data-stu-id="c40ad-473">Unlike Azure, the capability of replicating storage across multiple regions does not exist.</span></span> <span data-ttu-id="c40ad-474">W centrum Azure Stack każde wystąpienie jest własną odrębną chmurą.</span><span class="sxs-lookup"><span data-stu-id="c40ad-474">In Azure Stack Hub, each instance is its own distinct cloud.</span></span> <span data-ttu-id="c40ad-475">Dostępne są jednak rozwiązania partnerów firmy Microsoft, które umożliwiają replikację magazynu między centrami Azure Stack i platformą Azure.</span><span class="sxs-lookup"><span data-stu-id="c40ad-475">However, solutions are available from Microsoft Partners that enable storage replication across Azure Stack Hubs and Azure.</span></span> 

<span data-ttu-id="c40ad-476">**SCALITY**</span><span class="sxs-lookup"><span data-stu-id="c40ad-476">**SCALITY**</span></span>

<span data-ttu-id="c40ad-477">[Scality](https://www.scality.com/) zapewnia magazyn w skali sieci Web, który ma napędzane firmy cyfrowe od 2009.</span><span class="sxs-lookup"><span data-stu-id="c40ad-477">[Scality](https://www.scality.com/) delivers web-scale storage that has powered digital businesses since 2009.</span></span> <span data-ttu-id="c40ad-478">PIERŚCIEŃ Scality, nasz magazyn zdefiniowany przez oprogramowanie, włącza serwery z procesorami x86 do nieograniczonej puli magazynów dla dowolnego typu danych — plik i obiekt — na skalę petabajtów.</span><span class="sxs-lookup"><span data-stu-id="c40ad-478">The Scality RING, our software-defined storage, turns commodity x86 servers into an unlimited storage pool for any type of data –file and object– at petabyte scale.</span></span>

<span data-ttu-id="c40ad-479">**CLOUDIAN**</span><span class="sxs-lookup"><span data-stu-id="c40ad-479">**CLOUDIAN**</span></span>

<span data-ttu-id="c40ad-480">[Cloudian](https://www.cloudian.com/) upraszcza magazyn przedsiębiorstwa z nieograniczonym skalowalnym magazynem, który konsoliduje duże zestawy danych do jednego, łatwo zarządzanego środowiska.</span><span class="sxs-lookup"><span data-stu-id="c40ad-480">[Cloudian](https://www.cloudian.com/) simplifies enterprise storage with limitless scalable storage that consolidates massive data sets to a single, easily managed environment.</span></span>

## <a name="next-steps"></a><span data-ttu-id="c40ad-481">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="c40ad-481">Next steps</span></span>

<span data-ttu-id="c40ad-482">Aby dowiedzieć się więcej na temat pojęć wprowadzonych w tym artykule:</span><span class="sxs-lookup"><span data-stu-id="c40ad-482">To learn more about concepts introduced in this article:</span></span>

- <span data-ttu-id="c40ad-483">[Skalowanie między chmurami](pattern-cross-cloud-scale.md) i [wzorce aplikacji rozproszonych geograficznie](pattern-geo-distributed.md) w centrum Azure Stack.</span><span class="sxs-lookup"><span data-stu-id="c40ad-483">[Cross-cloud scaling](pattern-cross-cloud-scale.md) and [Geo-distributed app patterns](pattern-geo-distributed.md) in Azure Stack Hub.</span></span>
- <span data-ttu-id="c40ad-484">[Architektura mikrousług w usłudze Azure Kubernetes Service (AKS)](/azure/architecture/reference-architectures/microservices/aks).</span><span class="sxs-lookup"><span data-stu-id="c40ad-484">[Microservices architecture on Azure Kubernetes Service (AKS)](/azure/architecture/reference-architectures/microservices/aks).</span></span>

<span data-ttu-id="c40ad-485">Gdy wszystko będzie gotowe do testowania przykładowego rozwiązania, przejdź do [przewodnika wdrażania klastra Kubernetes o wysokiej dostępności](solution-deployment-guide-highly-available-kubernetes.md).</span><span class="sxs-lookup"><span data-stu-id="c40ad-485">When you're ready to test the solution example, continue with the [High availability Kubernetes cluster deployment guide](solution-deployment-guide-highly-available-kubernetes.md).</span></span> <span data-ttu-id="c40ad-486">Przewodnik wdrażania zawiera instrukcje krok po kroku dotyczące wdrażania i testowania jego składników.</span><span class="sxs-lookup"><span data-stu-id="c40ad-486">The deployment guide provides step-by-step instructions for deploying and testing its components.</span></span>